; Listing generated by Microsoft (R) Optimizing Compiler Version 13.10.3077 

	TITLE	.\source\edportal.cpp
	.386P
include listing.inc
if @Version gt 510
.model FLAT
else
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
_BSS	SEGMENT DWORD USE32 PUBLIC 'BSS'
_BSS	ENDS
$$SYMBOLS	SEGMENT BYTE USE32 'DEBSYM'
$$SYMBOLS	ENDS
$$TYPES	SEGMENT BYTE USE32 'DEBTYP'
$$TYPES	ENDS
_TLS	SEGMENT DWORD USE32 PUBLIC 'TLS'
_TLS	ENDS
;	COMDAT ??_C@_03IDDGKHFD@X?5Y?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_03KIBLPEJA@X?5Z?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_03CJDPGPNI@Z?5Y?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_01MMEEDKFM@X?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_01NFFPALBN@Y?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_01POHCFINO@Z?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_06JCBBMBIP@Camera?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_05MFLOHCHP@World?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_0IN@MFGFCLHC@c?3?2documents?5and?5settings?2jarhea@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_0CI@FLKNGGAB@Can?8t?5alloc?5memory?5for?5editing?5p@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_02JDPG@rb?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_02GMLFBBN@wb?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_03NGCFFGIN@po?9?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_0BD@LOLBIAL@Saved?5Portal?5File?3?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_03OLAGBHBG@por?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_02DPKJAMEF@?$CFd?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_06FLCJJPBG@Region?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_06FPPGHFGB@Portal?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_05FEDMHOOH@ID?5?$CFd?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_06CEKNEMPB@ID1?5?$CFd?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_06GDANDGCB@ID2?5?$CFd?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_0N@MOINFLNL@Axis?5?$CFs?5?9?5?$CFs?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_03JJNBAPG@Yep?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_04PBCAPOCN@Nope?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT ??_C@_0BC@GJMGDHLD@Big?5Bellends?3?5?5?$CFs?$AA@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
;	COMDAT _IsEqualGUID
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _==
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _acosl
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _asinl
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _atanl
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _atan2l
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _ceill
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _cosl
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _coshl
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _expl
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _fabsl
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _floorl
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _fmodl
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _frexpl
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _ldexpl
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _logl
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _log10l
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _modfl
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _powl
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _sinl
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _sinhl
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _sqrtl
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _tanl
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _tanhl
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _frexpf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _ldexpf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _acosf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _asinf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _atanf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _atan2f
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _ceilf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _cosf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _coshf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _expf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _fabsf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _floorf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _fmodf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _logf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _log10f
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _modff
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _powf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _sinf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _sinhf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _sqrtf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _tanf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT _tanhf
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?sqrt@@YAMM@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?KillEditPortals@@YAXXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?LoadEditPortals@@YAXPAD@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?SaveEditPortals@@YAXPAD@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?AllocEditPortal@@YAPAUEDIT_PORTAL@@XZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?FreeEditPortal@@YAXPAUEDIT_PORTAL@@@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?EditPortals@@YAXXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?DrawPortals@@YAXXZ
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?DisplayPortalInfo@@YAXPAUEDIT_PORTAL@@@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??$_Pow_int@N@@YANNH@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??$_Pow_int@H@@YAHHH@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??$_Pow_int@M@@YAMMH@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ??$_Pow_int@O@@YAOOH@Z
_TEXT	SEGMENT PARA USE32 PUBLIC 'CODE'
_TEXT	ENDS
;	COMDAT ?__LINE__Var@?1??LoadEditPortals@@YAXPAD@Z@4JA
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
;	COMDAT ?__LINE__Var@?1??KillEditPortals@@YAXXZ@4JA
_DATA	SEGMENT DWORD USE32 PUBLIC 'DATA'
_DATA	ENDS
sxdata	SEGMENT DWORD USE32 'SXDATA'
sxdata	ENDS
FLAT	GROUP _DATA, CONST, _BSS
	ASSUME	CS: FLAT, DS: FLAT, SS: FLAT
endif

INCLUDELIB LIBCD
INCLUDELIB OLDNAMES

PUBLIC	??_C@_03IDDGKHFD@X?5Y?$AA@			; `string'
PUBLIC	??_C@_03KIBLPEJA@X?5Z?$AA@			; `string'
PUBLIC	??_C@_03CJDPGPNI@Z?5Y?$AA@			; `string'
PUBLIC	??_C@_01MMEEDKFM@X?$AA@				; `string'
PUBLIC	??_C@_01NFFPALBN@Y?$AA@				; `string'
PUBLIC	??_C@_01POHCFINO@Z?$AA@				; `string'
PUBLIC	??_C@_06JCBBMBIP@Camera?$AA@			; `string'
PUBLIC	??_C@_05MFLOHCHP@World?$AA@			; `string'
PUBLIC	?CurrentPortal@@3PAUEDIT_PORTAL@@A		; CurrentPortal
_BSS	SEGMENT
?CurrentPortal@@3PAUEDIT_PORTAL@@A DD 01H DUP (?)	; CurrentPortal
_BSS	ENDS
_DATA	SEGMENT
_BigBrother DD	01H
_DATA	ENDS
;	COMDAT ??_C@_03IDDGKHFD@X?5Y?$AA@
CONST	SEGMENT
??_C@_03IDDGKHFD@X?5Y?$AA@ DB 'X Y', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_03KIBLPEJA@X?5Z?$AA@
CONST	SEGMENT
??_C@_03KIBLPEJA@X?5Z?$AA@ DB 'X Z', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_03CJDPGPNI@Z?5Y?$AA@
CONST	SEGMENT
??_C@_03CJDPGPNI@Z?5Y?$AA@ DB 'Z Y', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_01MMEEDKFM@X?$AA@
CONST	SEGMENT
??_C@_01MMEEDKFM@X?$AA@ DB 'X', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_01NFFPALBN@Y?$AA@
CONST	SEGMENT
??_C@_01NFFPALBN@Y?$AA@ DB 'Y', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_01POHCFINO@Z?$AA@
CONST	SEGMENT
??_C@_01POHCFINO@Z?$AA@ DB 'Z', 00H			; `string'
CONST	ENDS
_DATA	SEGMENT
_EditPortalAxisNames DD FLAT:??_C@_03IDDGKHFD@X?5Y?$AA@
	DD	FLAT:??_C@_03KIBLPEJA@X?5Z?$AA@
	DD	FLAT:??_C@_03CJDPGPNI@Z?5Y?$AA@
	DD	FLAT:??_C@_01MMEEDKFM@X?$AA@
	DD	FLAT:??_C@_01NFFPALBN@Y?$AA@
	DD	FLAT:??_C@_01POHCFINO@Z?$AA@
_DATA	ENDS
;	COMDAT ??_C@_06JCBBMBIP@Camera?$AA@
CONST	SEGMENT
??_C@_06JCBBMBIP@Camera?$AA@ DB 'Camera', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_05MFLOHCHP@World?$AA@
CONST	SEGMENT
??_C@_05MFLOHCHP@World?$AA@ DB 'World', 00H		; `string'
CONST	ENDS
_DATA	SEGMENT
_EditPortalAxisTypeNames DD FLAT:??_C@_06JCBBMBIP@Camera?$AA@
	DD	FLAT:??_C@_05MFLOHCHP@World?$AA@
_DrawPortalIndex DW 01H
	DW	03H
	DW	07H
	DW	05H
	DW	02H
	DW	00H
	DW	04H
	DW	06H
	DW	04H
	DW	05H
	DW	07H
	DW	06H
	DW	00H
	DW	02H
	DW	03H
	DW	01H
	DW	03H
	DW	02H
	DW	06H
	DW	07H
	DW	00H
	DW	01H
	DW	05H
	DW	04H
_DrawPortalCol DD 080ff0000H
	DD	08000ff00H
	DD	0800000ffH
	DD	080ffff00H
	DD	080ff00ffH
	DD	08000ffffH
_DATA	ENDS
PUBLIC	?__LINE__Var@?1??KillEditPortals@@YAXXZ@4JA	; `KillEditPortals'::`2'::__LINE__Var
PUBLIC	??_C@_0IN@MFGFCLHC@c?3?2documents?5and?5settings?2jarhea@ ; `string'
PUBLIC	?KillEditPortals@@YAXXZ				; KillEditPortals
EXTRN	?DebugFree@@YAXPAXHPAD@Z:NEAR			; DebugFree
_BSS	SEGMENT
_EditPortal DD	01H DUP (?)
_BSS	ENDS
;	COMDAT ??_C@_0IN@MFGFCLHC@c?3?2documents?5and?5settings?2jarhea@
; File c:\documents and settings\jarhead\desktop\shit to display my love for xbox revolt and fuck you borman-ness\revolt source\source\edportal.cpp
CONST	SEGMENT
??_C@_0IN@MFGFCLHC@c?3?2documents?5and?5settings?2jarhea@ DB 'c:\document'
	DB	's and settings\jarhead\desktop\shit to display my love for xb'
	DB	'ox revolt and fuck you borman-ness\revolt source\source\edpor'
	DB	'tal.cpp', 00H				; `string'
CONST	ENDS
;	COMDAT ?__LINE__Var@?1??KillEditPortals@@YAXXZ@4JA
_DATA	SEGMENT
?__LINE__Var@?1??KillEditPortals@@YAXXZ@4JA DD 03dH	; `KillEditPortals'::`2'::__LINE__Var
; Function compile flags: /Odt /ZI
_DATA	ENDS
;	COMDAT ?KillEditPortals@@YAXXZ
_TEXT	SEGMENT
?KillEditPortals@@YAXXZ PROC NEAR			; KillEditPortals, COMDAT

; 61   : {

	push	ebp
	mov	ebp, esp
	sub	esp, 64					; 00000040H
	push	ebx
	push	esi
	push	edi

; 62   : 	free(EditPortal);

	push	OFFSET FLAT:??_C@_0IN@MFGFCLHC@c?3?2documents?5and?5settings?2jarhea@
	mov	eax, DWORD PTR ?__LINE__Var@?1??KillEditPortals@@YAXXZ@4JA
	add	eax, 1
	push	eax
	mov	ecx, DWORD PTR _EditPortal
	push	ecx
	call	?DebugFree@@YAXPAXHPAD@Z		; DebugFree
	add	esp, 12					; 0000000cH

; 63   : }

	pop	edi
	pop	esi
	pop	ebx
	mov	esp, ebp
	pop	ebp
	ret	0
?KillEditPortals@@YAXXZ ENDP				; KillEditPortals
_TEXT	ENDS
PUBLIC	?__LINE__Var@?1??LoadEditPortals@@YAXPAD@Z@4JA	; `LoadEditPortals'::`2'::__LINE__Var
PUBLIC	??_C@_0CI@FLKNGGAB@Can?8t?5alloc?5memory?5for?5editing?5p@ ; `string'
PUBLIC	??_C@_02JDPG@rb?$AA@				; `string'
PUBLIC	??_C@_02GMLFBBN@wb?$AA@				; `string'
PUBLIC	?LoadEditPortals@@YAXPAD@Z			; LoadEditPortals
EXTRN	_fclose:NEAR
EXTRN	_fopen:NEAR
EXTRN	_fread:NEAR
EXTRN	_fwrite:NEAR
EXTRN	?DebugMalloc@@YAPAXIHPAD@Z:NEAR			; DebugMalloc
EXTRN	__fltused:NEAR
EXTRN	?Box@@YAJPAD0J@Z:NEAR				; Box
EXTRN	?QuitGame@@3DA:BYTE				; QuitGame
EXTRN	?EditScale@@3MA:DWORD				; EditScale
_BSS	SEGMENT
_EditPortalNum DD 01H DUP (?)
_BSS	ENDS
;	COMDAT ?__LINE__Var@?1??LoadEditPortals@@YAXPAD@Z@4JA
_DATA	SEGMENT
?__LINE__Var@?1??LoadEditPortals@@YAXPAD@Z@4JA DD 046H	; `LoadEditPortals'::`2'::__LINE__Var
_DATA	ENDS
;	COMDAT ??_C@_0CI@FLKNGGAB@Can?8t?5alloc?5memory?5for?5editing?5p@
CONST	SEGMENT
??_C@_0CI@FLKNGGAB@Can?8t?5alloc?5memory?5for?5editing?5p@ DB 'Can''t all'
	DB	'oc memory for editing portals!', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_02JDPG@rb?$AA@
CONST	SEGMENT
??_C@_02JDPG@rb?$AA@ DB 'rb', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_02GMLFBBN@wb?$AA@
CONST	SEGMENT
??_C@_02GMLFBBN@wb?$AA@ DB 'wb', 00H			; `string'
; Function compile flags: /Odt /ZI
CONST	ENDS
;	COMDAT ?LoadEditPortals@@YAXPAD@Z
_TEXT	SEGMENT
_por$ = -96						; size = 88
_fp$ = -8						; size = 4
_i$ = -4						; size = 4
_file$ = 8						; size = 4
?LoadEditPortals@@YAXPAD@Z PROC NEAR			; LoadEditPortals, COMDAT

; 70   : {

	push	ebp
	mov	ebp, esp
	sub	esp, 160				; 000000a0H
	push	ebx
	push	esi
	push	edi

; 71   : 	long i;
; 72   : 	FILE *fp;
; 73   : 	EDIT_PORTAL por;
; 74   : 
; 75   : // alloc mem
; 76   : 
; 77   : 	EditPortal = (EDIT_PORTAL*)malloc(sizeof(EDIT_PORTAL) * MAX_EDIT_PORTALS);

	push	OFFSET FLAT:??_C@_0IN@MFGFCLHC@c?3?2documents?5and?5settings?2jarhea@
	mov	eax, DWORD PTR ?__LINE__Var@?1??LoadEditPortals@@YAXPAD@Z@4JA
	add	eax, 7
	push	eax
	push	90112					; 00016000H
	call	?DebugMalloc@@YAPAXIHPAD@Z		; DebugMalloc
	add	esp, 12					; 0000000cH
	mov	DWORD PTR _EditPortal, eax

; 78   : 	if (!EditPortal)

	cmp	DWORD PTR _EditPortal, 0
	jne	SHORT $L81241

; 79   : 	{
; 80   : 		Box(NULL, "Can't alloc memory for editing portals!", MB_OK);

	push	0
	push	OFFSET FLAT:??_C@_0CI@FLKNGGAB@Can?8t?5alloc?5memory?5for?5editing?5p@
	push	0
	call	?Box@@YAJPAD0J@Z			; Box
	add	esp, 12					; 0000000cH

; 81   : 		QuitGame = TRUE;

	mov	BYTE PTR ?QuitGame@@3DA, 1		; QuitGame

; 82   : 		return;

	jmp	$L81234
$L81241:

; 83   : 	}
; 84   : 
; 85   : // open file
; 86   : 
; 87   : 	fp = fopen(file, "rb");

	push	OFFSET FLAT:??_C@_02JDPG@rb?$AA@
	mov	eax, DWORD PTR _file$[ebp]
	push	eax
	call	_fopen
	add	esp, 8
	mov	DWORD PTR _fp$[ebp], eax

; 88   : 
; 89   : // if not there create empty one
; 90   : 
; 91   : 	if (!fp)

	cmp	DWORD PTR _fp$[ebp], 0
	jne	SHORT $L81244

; 92   : 	{
; 93   : 		fp = fopen(file, "wb");

	push	OFFSET FLAT:??_C@_02GMLFBBN@wb?$AA@
	mov	eax, DWORD PTR _file$[ebp]
	push	eax
	call	_fopen
	add	esp, 8
	mov	DWORD PTR _fp$[ebp], eax

; 94   : 		if (!fp) return;

	cmp	DWORD PTR _fp$[ebp], 0
	jne	SHORT $L81246
	jmp	$L81234
$L81246:

; 95   : 		i = 0;

	mov	DWORD PTR _i$[ebp], 0

; 96   : 		fwrite(&i, sizeof(i), 1, fp);

	mov	eax, DWORD PTR _fp$[ebp]
	push	eax
	push	1
	push	4
	lea	ecx, DWORD PTR _i$[ebp]
	push	ecx
	call	_fwrite
	add	esp, 16					; 00000010H

; 97   : 		fclose(fp);

	mov	eax, DWORD PTR _fp$[ebp]
	push	eax
	call	_fclose
	add	esp, 4

; 98   : 		fp = fopen(file, "rb");

	push	OFFSET FLAT:??_C@_02JDPG@rb?$AA@
	mov	eax, DWORD PTR _file$[ebp]
	push	eax
	call	_fopen
	add	esp, 8
	mov	DWORD PTR _fp$[ebp], eax

; 99   : 		if (!fp) return;

	cmp	DWORD PTR _fp$[ebp], 0
	jne	SHORT $L81244
	jmp	$L81234
$L81244:

; 100  : 	}
; 101  : 
; 102  : // loop thru all portals
; 103  : 
; 104  : 	fread(&EditPortalNum, sizeof(EditPortalNum), 1, fp);

	mov	eax, DWORD PTR _fp$[ebp]
	push	eax
	push	1
	push	4
	push	OFFSET FLAT:_EditPortalNum
	call	_fread
	add	esp, 16					; 00000010H

; 105  : 
; 106  : 	for (i = 0 ; i < EditPortalNum ; i++)

	mov	DWORD PTR _i$[ebp], 0
	jmp	SHORT $L81248
$L81249:
	mov	eax, DWORD PTR _i$[ebp]
	add	eax, 1
	mov	DWORD PTR _i$[ebp], eax
$L81248:
	mov	eax, DWORD PTR _i$[ebp]
	cmp	eax, DWORD PTR _EditPortalNum
	jge	SHORT $L81250

; 107  : 	{
; 108  : 
; 109  : // load one portal
; 110  : 
; 111  : 		fread(&por, sizeof(por), 1, fp);

	mov	eax, DWORD PTR _fp$[ebp]
	push	eax
	push	1
	push	88					; 00000058H
	lea	ecx, DWORD PTR _por$[ebp]
	push	ecx
	call	_fread
	add	esp, 16					; 00000010H

; 112  : 
; 113  : 		VecMulScalar(&por.Pos, EditScale);

	fld	DWORD PTR _por$[ebp+12]
	fmul	DWORD PTR ?EditScale@@3MA		; EditScale
	fstp	DWORD PTR _por$[ebp+12]
	fld	DWORD PTR _por$[ebp+16]
	fmul	DWORD PTR ?EditScale@@3MA		; EditScale
	fstp	DWORD PTR _por$[ebp+16]
	fld	DWORD PTR _por$[ebp+20]
	fmul	DWORD PTR ?EditScale@@3MA		; EditScale
	fstp	DWORD PTR _por$[ebp+20]

; 114  : 		VecMulScalar((VEC*)&por.Size, EditScale);

	fld	DWORD PTR _por$[ebp+60]
	fmul	DWORD PTR ?EditScale@@3MA		; EditScale
	fstp	DWORD PTR _por$[ebp+60]
	fld	DWORD PTR _por$[ebp+64]
	fmul	DWORD PTR ?EditScale@@3MA		; EditScale
	fstp	DWORD PTR _por$[ebp+64]
	fld	DWORD PTR _por$[ebp+68]
	fmul	DWORD PTR ?EditScale@@3MA		; EditScale
	fstp	DWORD PTR _por$[ebp+68]

; 115  : 
; 116  : // setup edit portal
; 117  : 
; 118  : 		EditPortal[i] = por;

	mov	edi, DWORD PTR _i$[ebp]
	imul	edi, 88					; 00000058H
	add	edi, DWORD PTR _EditPortal
	mov	ecx, 22					; 00000016H
	lea	esi, DWORD PTR _por$[ebp]
	rep movsd

; 119  : 	}

	jmp	$L81249
$L81250:

; 120  : 
; 121  : // close file
; 122  : 
; 123  : 	fclose(fp);

	mov	eax, DWORD PTR _fp$[ebp]
	push	eax
	call	_fclose
	add	esp, 4
$L81234:

; 124  : }

	pop	edi
	pop	esi
	pop	ebx
	mov	esp, ebp
	pop	ebp
	ret	0
?LoadEditPortals@@YAXPAD@Z ENDP				; LoadEditPortals
_TEXT	ENDS
PUBLIC	??_C@_03NGCFFGIN@po?9?$AA@			; `string'
PUBLIC	??_C@_0BD@LOLBIAL@Saved?5Portal?5File?3?$AA@	; `string'
PUBLIC	?SaveEditPortals@@YAXPAD@Z			; SaveEditPortals
EXTRN	_remove:NEAR
EXTRN	_rename:NEAR
EXTRN	_memcpy:NEAR
EXTRN	_strlen:NEAR
EXTRN	__imp__wsprintfA:NEAR
;	COMDAT ??_C@_03NGCFFGIN@po?9?$AA@
CONST	SEGMENT
??_C@_03NGCFFGIN@po?9?$AA@ DB 'po-', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BD@LOLBIAL@Saved?5Portal?5File?3?$AA@
CONST	SEGMENT
??_C@_0BD@LOLBIAL@Saved?5Portal?5File?3?$AA@ DB 'Saved Portal File:', 00H ; `string'
; Function compile flags: /Odt /ZI
CONST	ENDS
;	COMDAT ?SaveEditPortals@@YAXPAD@Z
_TEXT	SEGMENT
_bak$ = -352						; size = 256
_por$ = -96						; size = 88
_fp$ = -8						; size = 4
_i$ = -4						; size = 4
_file$ = 8						; size = 4
?SaveEditPortals@@YAXPAD@Z PROC NEAR			; SaveEditPortals, COMDAT

; 131  : {

	push	ebp
	mov	ebp, esp
	sub	esp, 416				; 000001a0H
	push	ebx
	push	esi
	push	edi

; 132  : 	long i;
; 133  : 	FILE *fp;
; 134  : 	EDIT_PORTAL por;
; 135  : 	char bak[256];
; 136  : 
; 137  : // backup old file
; 138  : 
; 139  : 	memcpy(bak, file, strlen(file) - 3);

	mov	eax, DWORD PTR _file$[ebp]
	push	eax
	call	_strlen
	add	esp, 4
	sub	eax, 3
	push	eax
	mov	ecx, DWORD PTR _file$[ebp]
	push	ecx
	lea	edx, DWORD PTR _bak$[ebp]
	push	edx
	call	_memcpy
	add	esp, 12					; 0000000cH

; 140  : 	wsprintf(bak + strlen(file) - 3, "po-");

	push	OFFSET FLAT:??_C@_03NGCFFGIN@po?9?$AA@
	mov	eax, DWORD PTR _file$[ebp]
	push	eax
	call	_strlen
	add	esp, 4
	lea	ecx, DWORD PTR _bak$[ebp+eax-3]
	push	ecx
	call	DWORD PTR __imp__wsprintfA
	add	esp, 8

; 141  : 	remove(bak);

	lea	eax, DWORD PTR _bak$[ebp]
	push	eax
	call	_remove
	add	esp, 4

; 142  : 	rename(file, bak);

	lea	eax, DWORD PTR _bak$[ebp]
	push	eax
	mov	ecx, DWORD PTR _file$[ebp]
	push	ecx
	call	_rename
	add	esp, 8

; 143  : 
; 144  : // open portal file
; 145  : 
; 146  : 	fp = fopen(file, "wb");

	push	OFFSET FLAT:??_C@_02GMLFBBN@wb?$AA@
	mov	eax, DWORD PTR _file$[ebp]
	push	eax
	call	_fopen
	add	esp, 8
	mov	DWORD PTR _fp$[ebp], eax

; 147  : 	if (!fp) return;

	cmp	DWORD PTR _fp$[ebp], 0
	jne	SHORT $L81262
	jmp	SHORT $L81256
$L81262:

; 148  : 
; 149  : // write num
; 150  : 
; 151  : 	fwrite(&EditPortalNum, sizeof(EditPortalNum), 1, fp);

	mov	eax, DWORD PTR _fp$[ebp]
	push	eax
	push	1
	push	4
	push	OFFSET FLAT:_EditPortalNum
	call	_fwrite
	add	esp, 16					; 00000010H

; 152  : 
; 153  : // write out each portal
; 154  : 
; 155  : 	for (i = 0 ; i < EditPortalNum ; i++)

	mov	DWORD PTR _i$[ebp], 0
	jmp	SHORT $L81263
$L81264:
	mov	eax, DWORD PTR _i$[ebp]
	add	eax, 1
	mov	DWORD PTR _i$[ebp], eax
$L81263:
	mov	eax, DWORD PTR _i$[ebp]
	cmp	eax, DWORD PTR _EditPortalNum
	jge	SHORT $L81265

; 156  : 	{
; 157  : 
; 158  : // set file portal
; 159  : 
; 160  : 		por = EditPortal[i];

	mov	esi, DWORD PTR _i$[ebp]
	imul	esi, 88					; 00000058H
	add	esi, DWORD PTR _EditPortal
	mov	ecx, 22					; 00000016H
	lea	edi, DWORD PTR _por$[ebp]
	rep movsd

; 161  : 
; 162  : // write it
; 163  : 
; 164  : 		fwrite(&por, sizeof(por), 1, fp);

	mov	eax, DWORD PTR _fp$[ebp]
	push	eax
	push	1
	push	88					; 00000058H
	lea	ecx, DWORD PTR _por$[ebp]
	push	ecx
	call	_fwrite
	add	esp, 16					; 00000010H

; 165  : 	}

	jmp	SHORT $L81264
$L81265:

; 166  : 
; 167  : // close file
; 168  : 
; 169  : 	Box("Saved Portal File:", file, MB_OK);

	push	0
	mov	eax, DWORD PTR _file$[ebp]
	push	eax
	push	OFFSET FLAT:??_C@_0BD@LOLBIAL@Saved?5Portal?5File?3?$AA@
	call	?Box@@YAJPAD0J@Z			; Box
	add	esp, 12					; 0000000cH

; 170  : 	fclose(fp);

	mov	eax, DWORD PTR _fp$[ebp]
	push	eax
	call	_fclose
	add	esp, 4
$L81256:

; 171  : }

	pop	edi
	pop	esi
	pop	ebx
	mov	esp, ebp
	pop	ebp
	ret	0
?SaveEditPortals@@YAXPAD@Z ENDP				; SaveEditPortals
_TEXT	ENDS
PUBLIC	?AllocEditPortal@@YAPAUEDIT_PORTAL@@XZ		; AllocEditPortal
; Function compile flags: /Odt /ZI
;	COMDAT ?AllocEditPortal@@YAPAUEDIT_PORTAL@@XZ
_TEXT	SEGMENT
tv68 = -68						; size = 4
?AllocEditPortal@@YAPAUEDIT_PORTAL@@XZ PROC NEAR	; AllocEditPortal, COMDAT

; 178  : {

	push	ebp
	mov	ebp, esp
	sub	esp, 68					; 00000044H
	push	ebx
	push	esi
	push	edi

; 179  : 
; 180  : // full?
; 181  : 
; 182  : 	if (EditPortalNum >= MAX_EDIT_PORTALS)

	cmp	DWORD PTR _EditPortalNum, 1024		; 00000400H
	jl	SHORT $L81270

; 183  : 		return NULL;

	xor	eax, eax
	jmp	SHORT $L81269
$L81270:

; 184  : 
; 185  : // inc counter, return slot
; 186  : 
; 187  : 	return &EditPortal[EditPortalNum++];

	mov	eax, DWORD PTR _EditPortalNum
	imul	eax, 88					; 00000058H
	add	eax, DWORD PTR _EditPortal
	mov	DWORD PTR tv68[ebp], eax
	mov	ecx, DWORD PTR _EditPortalNum
	add	ecx, 1
	mov	DWORD PTR _EditPortalNum, ecx
	mov	eax, DWORD PTR tv68[ebp]
$L81269:

; 188  : }

	pop	edi
	pop	esi
	pop	ebx
	mov	esp, ebp
	pop	ebp
	ret	0
?AllocEditPortal@@YAPAUEDIT_PORTAL@@XZ ENDP		; AllocEditPortal
_TEXT	ENDS
PUBLIC	?FreeEditPortal@@YAXPAUEDIT_PORTAL@@@Z		; FreeEditPortal
; Function compile flags: /Odt /ZI
;	COMDAT ?FreeEditPortal@@YAXPAUEDIT_PORTAL@@@Z
_TEXT	SEGMENT
_i$ = -8						; size = 4
_idx$ = -4						; size = 4
_portal$ = 8						; size = 4
?FreeEditPortal@@YAXPAUEDIT_PORTAL@@@Z PROC NEAR	; FreeEditPortal, COMDAT

; 195  : {

	push	ebp
	mov	ebp, esp
	sub	esp, 72					; 00000048H
	push	ebx
	push	esi
	push	edi

; 196  : 	long idx, i;
; 197  : 
; 198  : // find index into list
; 199  : 
; 200  : 	idx = (long)(portal - EditPortal);

	mov	eax, DWORD PTR _portal$[ebp]
	sub	eax, DWORD PTR _EditPortal
	cdq
	mov	ecx, 88					; 00000058H
	idiv	ecx
	mov	DWORD PTR _idx$[ebp], eax

; 201  : 
; 202  : // copy all higher portals down one
; 203  : 
; 204  : 	for (i = idx ; i < EditPortalNum - 1; i++)

	mov	eax, DWORD PTR _idx$[ebp]
	mov	DWORD PTR _i$[ebp], eax
	jmp	SHORT $L81277
$L81278:
	mov	eax, DWORD PTR _i$[ebp]
	add	eax, 1
	mov	DWORD PTR _i$[ebp], eax
$L81277:
	mov	eax, DWORD PTR _EditPortalNum
	sub	eax, 1
	cmp	DWORD PTR _i$[ebp], eax
	jge	SHORT $L81279

; 205  : 	{
; 206  : 		EditPortal[i] = EditPortal[i + 1];

	mov	esi, DWORD PTR _i$[ebp]
	add	esi, 1
	imul	esi, 88					; 00000058H
	add	esi, DWORD PTR _EditPortal
	mov	edi, DWORD PTR _i$[ebp]
	imul	edi, 88					; 00000058H
	add	edi, DWORD PTR _EditPortal
	mov	ecx, 22					; 00000016H
	rep movsd

; 207  : 	}

	jmp	SHORT $L81278
$L81279:

; 208  : 
; 209  : // dec num
; 210  : 
; 211  : 	EditPortalNum--;

	mov	eax, DWORD PTR _EditPortalNum
	sub	eax, 1
	mov	DWORD PTR _EditPortalNum, eax

; 212  : }

	pop	edi
	pop	esi
	pop	ebx
	mov	esp, ebp
	pop	ebp
	ret	0
?FreeEditPortal@@YAXPAUEDIT_PORTAL@@@Z ENDP		; FreeEditPortal
_TEXT	ENDS
PUBLIC	?sqrt@@YAMM@Z					; sqrt
PUBLIC	??_C@_03OLAGBHBG@por?$AA@			; `string'
PUBLIC	?EditPortals@@YAXXZ				; EditPortals
PUBLIC	__real@45400000
PUBLIC	__real@3f800000
PUBLIC	__real@43a00000
PUBLIC	__real@43700000
PUBLIC	__real@43000000
PUBLIC	__real@40800000
PUBLIC	__real@c0800000
PUBLIC	__real@00000000
PUBLIC	__real@41800000
PUBLIC	__real@3a83126f
PUBLIC	__real@3e800000
EXTRN	?IdentityMatrix@@3TMatrixUnion@@A:BYTE		; IdentityMatrix
EXTRN	?GetLevelFilename@@YAPADPADJ@Z:NEAR		; GetLevelFilename
EXTRN	?Keys@@3PADA:BYTE				; Keys
EXTRN	?LastKeys@@3PADA:BYTE				; LastKeys
EXTRN	?Mouse@@3U_DIMOUSESTATE@@A:BYTE			; Mouse
EXTRN	?ViewMatrix@@3TMatrixUnion@@A:BYTE		; ViewMatrix
EXTRN	?ViewTrans@@3UVectorStruct@@A:BYTE		; ViewTrans
EXTRN	?MouseXpos@@3MA:DWORD				; MouseXpos
EXTRN	?MouseYpos@@3MA:DWORD				; MouseYpos
EXTRN	?MouseXrel@@3MA:DWORD				; MouseXrel
EXTRN	?MouseYrel@@3MA:DWORD				; MouseYrel
EXTRN	?CameraEditXrel@@3MA:DWORD			; CameraEditXrel
EXTRN	?CameraEditYrel@@3MA:DWORD			; CameraEditYrel
EXTRN	?CameraEditZrel@@3MA:DWORD			; CameraEditZrel
EXTRN	?MouseLeft@@3DA:BYTE				; MouseLeft
EXTRN	?MouseRight@@3DA:BYTE				; MouseRight
EXTRN	?CAM_MainCamera@@3PAUCameraStruct@@A:DWORD	; CAM_MainCamera
EXTRN	?TimeFactor@@3MA:DWORD				; TimeFactor
EXTRN	?RenderSettings@@3URENDER_SETTINGS@@A:BYTE	; RenderSettings
EXTRN	?RotMatrixZYX@@YAXPATMatrixUnion@@MMM@Z:NEAR	; RotMatrixZYX
EXTRN	?RotVector@@YAXPATMatrixUnion@@PAUVectorStruct@@1@Z:NEAR ; RotVector
EXTRN	?RotTransVector@@YAXPATMatrixUnion@@PAUVectorStruct@@11@Z:NEAR ; RotTransVector
EXTRN	?MulMatrix@@YAXPATMatrixUnion@@00@Z:NEAR	; MulMatrix
EXTRN	?CopyMatrix@@YAXPATMatrixUnion@@0@Z:NEAR	; CopyMatrix
_BSS	SEGMENT
_EditPortalAxis DD 01H DUP (?)
_EditPortalAxisType DD 01H DUP (?)
_EditPortalSide DD 01H DUP (?)
_LastEditPortalID DD 01H DUP (?)
_BSS	ENDS
;	COMDAT __real@45400000
CONST	SEGMENT
__real@45400000 DD 045400000r			; 3072
CONST	ENDS
;	COMDAT __real@3f800000
CONST	SEGMENT
__real@3f800000 DD 03f800000r			; 1
CONST	ENDS
;	COMDAT ??_C@_03OLAGBHBG@por?$AA@
CONST	SEGMENT
??_C@_03OLAGBHBG@por?$AA@ DB 'por', 00H			; `string'
CONST	ENDS
;	COMDAT __real@43a00000
CONST	SEGMENT
__real@43a00000 DD 043a00000r			; 320
CONST	ENDS
;	COMDAT __real@43700000
CONST	SEGMENT
__real@43700000 DD 043700000r			; 240
CONST	ENDS
;	COMDAT __real@43000000
CONST	SEGMENT
__real@43000000 DD 043000000r			; 128
CONST	ENDS
;	COMDAT __real@40800000
CONST	SEGMENT
__real@40800000 DD 040800000r			; 4
CONST	ENDS
;	COMDAT __real@c0800000
CONST	SEGMENT
__real@c0800000 DD 0c0800000r			; -4
CONST	ENDS
;	COMDAT __real@00000000
CONST	SEGMENT
__real@00000000 DD 000000000r			; 0
CONST	ENDS
;	COMDAT __real@41800000
CONST	SEGMENT
__real@41800000 DD 041800000r			; 16
CONST	ENDS
;	COMDAT __real@3a83126f
CONST	SEGMENT
__real@3a83126f DD 03a83126fr			; 0.001
CONST	ENDS
;	COMDAT __real@3e800000
CONST	SEGMENT
__real@3e800000 DD 03e800000r			; 0.25
; Function compile flags: /Odt /ZI
CONST	ENDS
;	COMDAT ?EditPortals@@YAXXZ
_TEXT	SEGMENT
tv1750 = -296						; size = 4
tv927 = -296						; size = 4
tv702 = -296						; size = 4
__mul$81409 = -228					; size = 4
__mul$81407 = -224					; size = 4
__mul$81402 = -220					; size = 4
__mul$81400 = -216					; size = 4
__mul$81309 = -212					; size = 4
__mul$81307 = -208					; size = 4
_portal$ = -204						; size = 4
_nportal$ = -200					; size = 4
_mat2$ = -196						; size = 36
_mat$ = -160						; size = 36
_add$ = -124						; size = 4
_rad$ = -120						; size = 4
_sy$ = -116						; size = 4
_sx$ = -112						; size = 4
_z$ = -108						; size = 4
_l2$ = -104						; size = 12
_u2$ = -92						; size = 12
_r2$ = -80						; size = 12
_l$ = -68						; size = 12
_u$ = -56						; size = 12
_r$ = -44						; size = 12
_vec2$ = -32						; size = 12
_vec$ = -20						; size = 12
_j$ = -8						; size = 4
_i$ = -4						; size = 4
?EditPortals@@YAXXZ PROC NEAR				; EditPortals, COMDAT

; 219  : {

	push	ebp
	mov	ebp, esp
	sub	esp, 296				; 00000128H
	push	ebx
	push	esi
	push	edi

; 220  : 	long i, j;
; 221  : 	VEC vec, vec2, r, u, l, r2, u2, l2;
; 222  : 	float z, sx, sy, rad, add;
; 223  : 	MAT mat, mat2;
; 224  : 	EDIT_PORTAL *nportal, *portal;
; 225  : 
; 226  : // toggle big brother
; 227  : 
; 228  : 	if (Keys[DIK_NUMPADENTER] && !LastKeys[DIK_NUMPADENTER])

	movsx	eax, BYTE PTR ?Keys@@3PADA+156
	test	eax, eax
	je	SHORT $L81302
	movsx	eax, BYTE PTR ?LastKeys@@3PADA+156
	test	eax, eax
	jne	SHORT $L81302

; 229  : 		BigBrother = !BigBrother;

	xor	eax, eax
	cmp	DWORD PTR _BigBrother, 0
	sete	al
	mov	DWORD PTR _BigBrother, eax
$L81302:

; 230  : 
; 231  : // quit if not in edit mode
; 232  : 
; 233  : 	if (CAM_MainCamera->Type != CAM_EDIT)

	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	cmp	DWORD PTR [eax], 5
	je	SHORT $L81303

; 234  : 	{
; 235  : 		CurrentPortal = NULL;

	mov	DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A, 0 ; CurrentPortal

; 236  : 		return;

	jmp	$L81282
$L81303:

; 237  : 	}
; 238  : 
; 239  : // rotate camera?
; 240  : 
; 241  : 	if (MouseRight)

	movsx	eax, BYTE PTR ?MouseRight@@3DA		; MouseRight
	test	eax, eax
	je	$L81304

; 242  : 	{
; 243  : 		RotMatrixZYX(&mat, (float)-Mouse.lY / 3072, -(float)Mouse.lX / 3072, 0);

	push	0
	fild	DWORD PTR ?Mouse@@3U_DIMOUSESTATE@@A
	fchs
	fdiv	DWORD PTR __real@45400000
	push	ecx
	fstp	DWORD PTR [esp]
	mov	eax, DWORD PTR ?Mouse@@3U_DIMOUSESTATE@@A+4
	neg	eax
	mov	DWORD PTR tv1750[ebp], eax
	fild	DWORD PTR tv1750[ebp]
	fdiv	DWORD PTR __real@45400000
	push	ecx
	fstp	DWORD PTR [esp]
	lea	ecx, DWORD PTR _mat$[ebp]
	push	ecx
	call	?RotMatrixZYX@@YAXPATMatrixUnion@@MMM@Z	; RotMatrixZYX
	add	esp, 16					; 00000010H

; 244  : 		MulMatrix(&CAM_MainCamera->WMatrix, &mat, &mat2);

	lea	eax, DWORD PTR _mat2$[ebp]
	push	eax
	lea	ecx, DWORD PTR _mat$[ebp]
	push	ecx
	mov	edx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	add	edx, 16					; 00000010H
	push	edx
	call	?MulMatrix@@YAXPATMatrixUnion@@00@Z	; MulMatrix
	add	esp, 12					; 0000000cH

; 245  : 		CopyMatrix(&mat2, &CAM_MainCamera->WMatrix);

	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	add	eax, 16					; 00000010H
	push	eax
	lea	ecx, DWORD PTR _mat2$[ebp]
	push	ecx
	call	?CopyMatrix@@YAXPATMatrixUnion@@0@Z	; CopyMatrix
	add	esp, 8

; 246  : 
; 247  : 		CAM_MainCamera->WMatrix.m[RY] = 0;

	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	mov	DWORD PTR [eax+20], 0

; 248  : 		NormalizeVector(&CAM_MainCamera->WMatrix.mv[X]);

	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR [eax+16]
	fmul	DWORD PTR [ecx+16]
	mov	edx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR [edx+20]
	fmul	DWORD PTR [eax+20]
	faddp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	mov	edx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR [ecx+24]
	fmul	DWORD PTR [edx+24]
	faddp	ST(1), ST(0)
	push	ecx
	fstp	DWORD PTR [esp]
	call	?sqrt@@YAMM@Z				; sqrt
	add	esp, 4
	fdivr	DWORD PTR __real@3f800000
	fstp	DWORD PTR __mul$81307[ebp]
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR __mul$81307[ebp]
	fmul	DWORD PTR [eax+16]
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fstp	DWORD PTR [ecx+16]
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR __mul$81307[ebp]
	fmul	DWORD PTR [eax+20]
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fstp	DWORD PTR [ecx+20]
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR __mul$81307[ebp]
	fmul	DWORD PTR [eax+24]
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fstp	DWORD PTR [ecx+24]

; 249  : 		CrossProduct(&CAM_MainCamera->WMatrix.mv[Z], &CAM_MainCamera->WMatrix.mv[X], &CAM_MainCamera->WMatrix.mv[Y]);

	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR [eax+44]
	fmul	DWORD PTR [ecx+24]
	mov	edx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR [edx+48]
	fmul	DWORD PTR [eax+20]
	fsubp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fstp	DWORD PTR [ecx+28]
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR [eax+48]
	fmul	DWORD PTR [ecx+16]
	mov	edx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR [edx+40]
	fmul	DWORD PTR [eax+24]
	fsubp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fstp	DWORD PTR [ecx+32]
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR [eax+40]
	fmul	DWORD PTR [ecx+20]
	mov	edx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR [edx+44]
	fmul	DWORD PTR [eax+16]
	fsubp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fstp	DWORD PTR [ecx+36]

; 250  : 		NormalizeVector(&CAM_MainCamera->WMatrix.mv[Y]);

	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR [eax+28]
	fmul	DWORD PTR [ecx+28]
	mov	edx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR [edx+32]
	fmul	DWORD PTR [eax+32]
	faddp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	mov	edx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR [ecx+36]
	fmul	DWORD PTR [edx+36]
	faddp	ST(1), ST(0)
	push	ecx
	fstp	DWORD PTR [esp]
	call	?sqrt@@YAMM@Z				; sqrt
	add	esp, 4
	fdivr	DWORD PTR __real@3f800000
	fstp	DWORD PTR __mul$81309[ebp]
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR __mul$81309[ebp]
	fmul	DWORD PTR [eax+28]
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fstp	DWORD PTR [ecx+28]
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR __mul$81309[ebp]
	fmul	DWORD PTR [eax+32]
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fstp	DWORD PTR [ecx+32]
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR __mul$81309[ebp]
	fmul	DWORD PTR [eax+36]
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fstp	DWORD PTR [ecx+36]

; 251  : 		CrossProduct(&CAM_MainCamera->WMatrix.mv[X], &CAM_MainCamera->WMatrix.mv[Y], &CAM_MainCamera->WMatrix.mv[Z]);

	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR [eax+20]
	fmul	DWORD PTR [ecx+36]
	mov	edx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR [edx+24]
	fmul	DWORD PTR [eax+32]
	fsubp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fstp	DWORD PTR [ecx+40]
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR [eax+24]
	fmul	DWORD PTR [ecx+28]
	mov	edx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR [edx+16]
	fmul	DWORD PTR [eax+36]
	fsubp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fstp	DWORD PTR [ecx+44]
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR [eax+16]
	fmul	DWORD PTR [ecx+32]
	mov	edx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR [edx+20]
	fmul	DWORD PTR [eax+28]
	fsubp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fstp	DWORD PTR [ecx+48]
$L81304:

; 252  : 	}
; 253  : 
; 254  : // save portals?
; 255  : 
; 256  : 	if (Keys[DIK_LCONTROL] && Keys[DIK_F4] && !LastKeys[DIK_F4])

	movsx	eax, BYTE PTR ?Keys@@3PADA+29
	test	eax, eax
	je	SHORT $L81311
	movsx	eax, BYTE PTR ?Keys@@3PADA+62
	test	eax, eax
	je	SHORT $L81311
	movsx	eax, BYTE PTR ?LastKeys@@3PADA+62
	test	eax, eax
	jne	SHORT $L81311

; 257  : 	{
; 258  : 		SaveEditPortals(GetLevelFilename("por", FILENAME_MAKE_BODY | FILENAME_GAME_SETTINGS));

	push	3
	push	OFFSET FLAT:??_C@_03OLAGBHBG@por?$AA@
	call	?GetLevelFilename@@YAPADPADJ@Z		; GetLevelFilename
	add	esp, 8
	push	eax
	call	?SaveEditPortals@@YAXPAD@Z		; SaveEditPortals
	add	esp, 4
$L81311:

; 259  : 	}
; 260  : 
; 261  : // get a current portal?
; 262  : 
; 263  : 	if (!CurrentPortal && Keys[DIK_RETURN] && !LastKeys[DIK_RETURN])

	cmp	DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A, 0 ; CurrentPortal
	jne	$L81313
	movsx	eax, BYTE PTR ?Keys@@3PADA+28
	test	eax, eax
	je	$L81313
	movsx	eax, BYTE PTR ?LastKeys@@3PADA+28
	test	eax, eax
	jne	$L81313

; 264  : 	{
; 265  : 		nportal = NULL;

	mov	DWORD PTR _nportal$[ebp], 0

; 266  : 		z = RenderSettings.FarClip;

	mov	eax, DWORD PTR ?RenderSettings@@3URENDER_SETTINGS@@A+32
	mov	DWORD PTR _z$[ebp], eax

; 267  : 
; 268  : 		portal = EditPortal;

	mov	eax, DWORD PTR _EditPortal
	mov	DWORD PTR _portal$[ebp], eax

; 269  : 		for (i = 0 ; i < EditPortalNum ; i++, portal++)

	mov	DWORD PTR _i$[ebp], 0
	jmp	SHORT $L81314
$L81315:
	mov	eax, DWORD PTR _i$[ebp]
	add	eax, 1
	mov	DWORD PTR _i$[ebp], eax
	mov	ecx, DWORD PTR _portal$[ebp]
	add	ecx, 88					; 00000058H
	mov	DWORD PTR _portal$[ebp], ecx
$L81314:
	mov	eax, DWORD PTR _i$[ebp]
	cmp	eax, DWORD PTR _EditPortalNum
	jge	$L81316

; 270  : 		{
; 271  : 			for (j = 0 ; j < 2 ; j++)

	mov	DWORD PTR _j$[ebp], 0
	jmp	SHORT $L81317
$L81318:
	mov	eax, DWORD PTR _j$[ebp]
	add	eax, 1
	mov	DWORD PTR _j$[ebp], eax
$L81317:
	cmp	DWORD PTR _j$[ebp], 2
	jge	$L81319

; 272  : 			{
; 273  : 				RotTransVector(&ViewMatrix, &ViewTrans, &portal->Pos, &vec);

	lea	eax, DWORD PTR _vec$[ebp]
	push	eax
	mov	ecx, DWORD PTR _portal$[ebp]
	add	ecx, 12					; 0000000cH
	push	ecx
	push	OFFSET FLAT:?ViewTrans@@3UVectorStruct@@A ; ViewTrans
	push	OFFSET FLAT:?ViewMatrix@@3TMatrixUnion@@A ; ViewMatrix
	call	?RotTransVector@@YAXPATMatrixUnion@@PAUVectorStruct@@11@Z ; RotTransVector
	add	esp, 16					; 00000010H

; 274  : 
; 275  : 				if (vec.v[Z] < RenderSettings.NearClip || vec.v[Z] >= RenderSettings.FarClip) continue;

	fld	DWORD PTR _vec$[ebp+8]
	fcomp	DWORD PTR ?RenderSettings@@3URENDER_SETTINGS@@A+28
	fnstsw	ax
	test	ah, 5
	jnp	SHORT $L81321
	fld	DWORD PTR _vec$[ebp+8]
	fcomp	DWORD PTR ?RenderSettings@@3URENDER_SETTINGS@@A+32
	fnstsw	ax
	test	ah, 1
	jne	SHORT $L81320
$L81321:
	jmp	SHORT $L81318
$L81320:

; 276  : 
; 277  : 				sx = vec.v[X] * RenderSettings.GeomPers / vec.v[Z] + REAL_SCREEN_XHALF;

	fld	DWORD PTR _vec$[ebp]
	fmul	DWORD PTR ?RenderSettings@@3URENDER_SETTINGS@@A
	fdiv	DWORD PTR _vec$[ebp+8]
	fadd	DWORD PTR __real@43a00000
	fstp	DWORD PTR _sx$[ebp]

; 278  : 				sy = vec.v[Y] * RenderSettings.GeomPers / vec.v[Z] + REAL_SCREEN_YHALF;

	fld	DWORD PTR _vec$[ebp+4]
	fmul	DWORD PTR ?RenderSettings@@3URENDER_SETTINGS@@A
	fdiv	DWORD PTR _vec$[ebp+8]
	fadd	DWORD PTR __real@43700000
	fstp	DWORD PTR _sy$[ebp]

; 279  : 
; 280  : 				rad = 128 * RenderSettings.GeomPers / vec.v[Z];

	fld	DWORD PTR __real@43000000
	fmul	DWORD PTR ?RenderSettings@@3URENDER_SETTINGS@@A
	fdiv	DWORD PTR _vec$[ebp+8]
	fstp	DWORD PTR _rad$[ebp]

; 281  : 
; 282  : 				if (MouseXpos > sx - rad && MouseXpos < sx + rad && MouseYpos > sy - rad && MouseYpos < sy + rad)

	fld	DWORD PTR _sx$[ebp]
	fsub	DWORD PTR _rad$[ebp]
	fcomp	DWORD PTR ?MouseXpos@@3MA		; MouseXpos
	fnstsw	ax
	test	ah, 5
	jp	SHORT $L81322
	fld	DWORD PTR _sx$[ebp]
	fadd	DWORD PTR _rad$[ebp]
	fcomp	DWORD PTR ?MouseXpos@@3MA		; MouseXpos
	fnstsw	ax
	test	ah, 65					; 00000041H
	jne	SHORT $L81322
	fld	DWORD PTR _sy$[ebp]
	fsub	DWORD PTR _rad$[ebp]
	fcomp	DWORD PTR ?MouseYpos@@3MA		; MouseYpos
	fnstsw	ax
	test	ah, 5
	jp	SHORT $L81322
	fld	DWORD PTR _sy$[ebp]
	fadd	DWORD PTR _rad$[ebp]
	fcomp	DWORD PTR ?MouseYpos@@3MA		; MouseYpos
	fnstsw	ax
	test	ah, 65					; 00000041H
	jne	SHORT $L81322

; 283  : 				{
; 284  : 					if (vec.v[Z] < z)

	fld	DWORD PTR _vec$[ebp+8]
	fcomp	DWORD PTR _z$[ebp]
	fnstsw	ax
	test	ah, 5
	jp	SHORT $L81322

; 285  : 					{
; 286  : 						nportal = portal;

	mov	eax, DWORD PTR _portal$[ebp]
	mov	DWORD PTR _nportal$[ebp], eax

; 287  : 						z = vec.v[Z];

	mov	eax, DWORD PTR _vec$[ebp+8]
	mov	DWORD PTR _z$[ebp], eax
$L81322:

; 288  : 					}
; 289  : 				}
; 290  : 			}

	jmp	$L81318
$L81319:

; 291  : 		}

	jmp	$L81315
$L81316:

; 292  : 		if (nportal)

	cmp	DWORD PTR _nportal$[ebp], 0
	je	SHORT $L81313

; 293  : 		{
; 294  : 			CurrentPortal = nportal;

	mov	eax, DWORD PTR _nportal$[ebp]
	mov	DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A, eax ; CurrentPortal

; 295  : 			return;

	jmp	$L81282
$L81313:

; 296  : 		}
; 297  : 	}
; 298  : 
; 299  : // new portal?
; 300  : 
; 301  : 	if (Keys[DIK_INSERT] && !LastKeys[DIK_INSERT])

	movsx	eax, BYTE PTR ?Keys@@3PADA+210
	test	eax, eax
	je	$L81325
	movsx	eax, BYTE PTR ?LastKeys@@3PADA+210
	test	eax, eax
	jne	$L81325

; 302  : 	{
; 303  : 		if ((portal = AllocEditPortal()))

	call	?AllocEditPortal@@YAPAUEDIT_PORTAL@@XZ	; AllocEditPortal
	mov	DWORD PTR _portal$[ebp], eax
	cmp	DWORD PTR _portal$[ebp], 0
	je	$L81325

; 304  : 		{
; 305  : 			vec.v[X] = 0;

	mov	DWORD PTR _vec$[ebp], 0

; 306  : 			vec.v[Y] = 0;

	mov	DWORD PTR _vec$[ebp+4], 0

; 307  : 			vec.v[Z] = 512;

	mov	DWORD PTR _vec$[ebp+8], 1140850688	; 44000000H

; 308  : 			RotVector(&CAM_MainCamera->WMatrix, &vec, &vec2);

	lea	eax, DWORD PTR _vec2$[ebp]
	push	eax
	lea	ecx, DWORD PTR _vec$[ebp]
	push	ecx
	mov	edx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	add	edx, 16					; 00000010H
	push	edx
	call	?RotVector@@YAXPATMatrixUnion@@PAUVectorStruct@@1@Z ; RotVector
	add	esp, 12					; 0000000cH

; 309  : 			AddVector(&CAM_MainCamera->WPos, &vec2, &portal->Pos);

	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR _vec2$[ebp]
	fadd	DWORD PTR [eax+68]
	mov	ecx, DWORD PTR _portal$[ebp]
	fstp	DWORD PTR [ecx+12]
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR _vec2$[ebp+4]
	fadd	DWORD PTR [eax+72]
	mov	ecx, DWORD PTR _portal$[ebp]
	fstp	DWORD PTR [ecx+16]
	mov	eax, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	fld	DWORD PTR _vec2$[ebp+8]
	fadd	DWORD PTR [eax+76]
	mov	ecx, DWORD PTR _portal$[ebp]
	fstp	DWORD PTR [ecx+20]

; 310  : 
; 311  : 			CopyMatrix(&IdentityMatrix, &portal->Matrix);

	mov	eax, DWORD PTR _portal$[ebp]
	add	eax, 24					; 00000018H
	push	eax
	push	OFFSET FLAT:?IdentityMatrix@@3TMatrixUnion@@A ; IdentityMatrix
	call	?CopyMatrix@@YAXPATMatrixUnion@@0@Z	; CopyMatrix
	add	esp, 8

; 312  : 
; 313  : 			portal->Size[X] = portal->Size[Y] = portal->Size[Z] = 128;

	mov	eax, DWORD PTR _portal$[ebp]
	mov	DWORD PTR [eax+68], 1124073472		; 43000000H
	mov	ecx, DWORD PTR _portal$[ebp]
	mov	DWORD PTR [ecx+64], 1124073472		; 43000000H
	mov	edx, DWORD PTR _portal$[ebp]
	mov	DWORD PTR [edx+60], 1124073472		; 43000000H

; 314  : 
; 315  : 			portal->Region = TRUE;

	mov	eax, DWORD PTR _portal$[ebp]
	mov	DWORD PTR [eax], 1

; 316  : 			portal->ID1 = LastEditPortalID;

	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR _LastEditPortalID
	mov	DWORD PTR [eax+4], ecx

; 317  : 			portal->ID2 = LastEditPortalID;

	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR _LastEditPortalID
	mov	DWORD PTR [eax+8], ecx

; 318  : 
; 319  : 			CurrentPortal = portal;

	mov	eax, DWORD PTR _portal$[ebp]
	mov	DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A, eax ; CurrentPortal
$L81325:

; 320  : 		}
; 321  : 	}
; 322  : 
; 323  : // quit now if no current portal
; 324  : 
; 325  : 	if (!CurrentPortal) return;

	cmp	DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A, 0 ; CurrentPortal
	jne	SHORT $L81327
	jmp	$L81282
$L81327:

; 326  : 
; 327  : // save ID to last
; 328  : 
; 329  : 	LastEditPortalID = CurrentPortal->ID1;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR [eax+4]
	mov	DWORD PTR _LastEditPortalID, ecx

; 330  : 
; 331  : // exit current edit?
; 332  : 
; 333  : 	if (Keys[DIK_RETURN] && !LastKeys[DIK_RETURN])

	movsx	eax, BYTE PTR ?Keys@@3PADA+28
	test	eax, eax
	je	SHORT $L81328
	movsx	eax, BYTE PTR ?LastKeys@@3PADA+28
	test	eax, eax
	jne	SHORT $L81328

; 334  : 	{
; 335  : 		CurrentPortal = NULL;

	mov	DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A, 0 ; CurrentPortal

; 336  : 		return;

	jmp	$L81282
$L81328:

; 337  : 	}
; 338  : 
; 339  : // delete current portal?
; 340  : 
; 341  : 	if (Keys[DIK_DELETE] && !LastKeys[DIK_DELETE])

	movsx	eax, BYTE PTR ?Keys@@3PADA+211
	test	eax, eax
	je	SHORT $L81329
	movsx	eax, BYTE PTR ?LastKeys@@3PADA+211
	test	eax, eax
	jne	SHORT $L81329

; 342  : 	{
; 343  : 		FreeEditPortal(CurrentPortal);

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	push	eax
	call	?FreeEditPortal@@YAXPAUEDIT_PORTAL@@@Z	; FreeEditPortal
	add	esp, 4

; 344  : 		CurrentPortal = NULL;

	mov	DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A, 0 ; CurrentPortal

; 345  : 		return;

	jmp	$L81282
$L81329:

; 346  : 	}
; 347  : 
; 348  : // change axis?
; 349  : 
; 350  : 	if (Keys[DIK_TAB] && !LastKeys[DIK_TAB])

	movsx	eax, BYTE PTR ?Keys@@3PADA+15
	test	eax, eax
	je	SHORT $L81330
	movsx	eax, BYTE PTR ?LastKeys@@3PADA+15
	test	eax, eax
	jne	SHORT $L81330

; 351  : 	{
; 352  : 		if (Keys[DIK_LSHIFT]) EditPortalAxis--;

	movsx	eax, BYTE PTR ?Keys@@3PADA+42
	test	eax, eax
	je	SHORT $L81331
	mov	eax, DWORD PTR _EditPortalAxis
	sub	eax, 1
	mov	DWORD PTR _EditPortalAxis, eax

; 353  : 		else EditPortalAxis++;

	jmp	SHORT $L81332
$L81331:
	mov	eax, DWORD PTR _EditPortalAxis
	add	eax, 1
	mov	DWORD PTR _EditPortalAxis, eax
$L81332:

; 354  : 		if (EditPortalAxis == -1) EditPortalAxis = 5;

	cmp	DWORD PTR _EditPortalAxis, -1
	jne	SHORT $L81333
	mov	DWORD PTR _EditPortalAxis, 5
$L81333:

; 355  : 		if (EditPortalAxis == 6) EditPortalAxis = 0;

	cmp	DWORD PTR _EditPortalAxis, 6
	jne	SHORT $L81330
	mov	DWORD PTR _EditPortalAxis, 0
$L81330:

; 356  : 	}
; 357  : 
; 358  : // change axis type?
; 359  : 
; 360  : 	if (Keys[DIK_LALT] && !LastKeys[DIK_LALT])

	movsx	eax, BYTE PTR ?Keys@@3PADA+56
	test	eax, eax
	je	SHORT $L81335
	movsx	eax, BYTE PTR ?LastKeys@@3PADA+56
	test	eax, eax
	jne	SHORT $L81335

; 361  : 		EditPortalAxisType ^= 1;

	mov	eax, DWORD PTR _EditPortalAxisType
	xor	eax, 1
	mov	DWORD PTR _EditPortalAxisType, eax
$L81335:

; 362  : 
; 363  : // change to / from region?
; 364  : 
; 365  : 	if (Keys[DIK_NUMPADPERIOD] && !LastKeys[DIK_NUMPADPERIOD])

	movsx	eax, BYTE PTR ?Keys@@3PADA+83
	test	eax, eax
	je	SHORT $L81336
	movsx	eax, BYTE PTR ?LastKeys@@3PADA+83
	test	eax, eax
	jne	SHORT $L81336

; 366  : 		CurrentPortal->Region = !CurrentPortal->Region;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	xor	ecx, ecx
	cmp	DWORD PTR [eax], 0
	sete	cl
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	DWORD PTR [edx], ecx
$L81336:

; 367  : 
; 368  : // change ID?
; 369  : 
; 370  : 	if (Keys[DIK_LSHIFT])

	movsx	eax, BYTE PTR ?Keys@@3PADA+42
	test	eax, eax
	je	$L81337

; 371  : 	{
; 372  : 		if (Keys[DIK_NUMPADMINUS] && !LastKeys[DIK_NUMPADMINUS])

	movsx	eax, BYTE PTR ?Keys@@3PADA+74
	test	eax, eax
	je	SHORT $L81338
	movsx	eax, BYTE PTR ?LastKeys@@3PADA+74
	test	eax, eax
	jne	SHORT $L81338

; 373  : 			CurrentPortal->ID2--;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR [eax+8]
	sub	ecx, 1
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	DWORD PTR [edx+8], ecx
$L81338:

; 374  : 		if (Keys[DIK_NUMPADPLUS] && !LastKeys[DIK_NUMPADPLUS])

	movsx	eax, BYTE PTR ?Keys@@3PADA+78
	test	eax, eax
	je	SHORT $L81339
	movsx	eax, BYTE PTR ?LastKeys@@3PADA+78
	test	eax, eax
	jne	SHORT $L81339

; 375  : 			CurrentPortal->ID2++;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR [eax+8]
	add	ecx, 1
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	DWORD PTR [edx+8], ecx
$L81339:

; 376  : 
; 377  : 		if (CurrentPortal->ID2 < 0)

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	cmp	DWORD PTR [eax+8], 0
	jge	SHORT $L81340

; 378  : 			CurrentPortal->ID2 = MAX_EDIT_PORTALS - 1;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	DWORD PTR [eax+8], 1023			; 000003ffH

; 379  : 		else if (CurrentPortal->ID2 >= MAX_EDIT_PORTALS)

	jmp	SHORT $L81341
$L81340:
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	cmp	DWORD PTR [eax+8], 1024			; 00000400H
	jl	SHORT $L81341

; 380  : 			CurrentPortal->ID2 = 0;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	DWORD PTR [eax+8], 0
$L81341:

; 381  : 	}
; 382  : 	else

	jmp	$L81343
$L81337:

; 383  : 	{
; 384  : 		if (Keys[DIK_NUMPADMINUS] && !LastKeys[DIK_NUMPADMINUS])

	movsx	eax, BYTE PTR ?Keys@@3PADA+74
	test	eax, eax
	je	SHORT $L81344
	movsx	eax, BYTE PTR ?LastKeys@@3PADA+74
	test	eax, eax
	jne	SHORT $L81344

; 385  : 			CurrentPortal->ID1--;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR [eax+4]
	sub	ecx, 1
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	DWORD PTR [edx+4], ecx
$L81344:

; 386  : 		if (Keys[DIK_NUMPADPLUS] && !LastKeys[DIK_NUMPADPLUS])

	movsx	eax, BYTE PTR ?Keys@@3PADA+78
	test	eax, eax
	je	SHORT $L81345
	movsx	eax, BYTE PTR ?LastKeys@@3PADA+78
	test	eax, eax
	jne	SHORT $L81345

; 387  : 			CurrentPortal->ID1++;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR [eax+4]
	add	ecx, 1
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	DWORD PTR [edx+4], ecx
$L81345:

; 388  : 
; 389  : 		if (CurrentPortal->ID1 < 0)

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	cmp	DWORD PTR [eax+4], 0
	jge	SHORT $L81346

; 390  : 			CurrentPortal->ID1 = MAX_EDIT_PORTALS - 1;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	DWORD PTR [eax+4], 1023			; 000003ffH

; 391  : 		else if (CurrentPortal->ID1 >= MAX_EDIT_PORTALS)

	jmp	SHORT $L81343
$L81346:
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	cmp	DWORD PTR [eax+4], 1024			; 00000400H
	jl	SHORT $L81343

; 392  : 			CurrentPortal->ID1 = 0;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	DWORD PTR [eax+4], 0
$L81343:

; 393  : 	}
; 394  : 
; 395  : // change side?
; 396  : 
; 397  : 	if (Keys[DIK_SPACE] && !LastKeys[DIK_SPACE])

	movsx	eax, BYTE PTR ?Keys@@3PADA+57
	test	eax, eax
	je	SHORT $L81349
	movsx	eax, BYTE PTR ?LastKeys@@3PADA+57
	test	eax, eax
	jne	SHORT $L81349

; 398  : 		EditPortalSide = (EditPortalSide + 1) % 6;

	mov	eax, DWORD PTR _EditPortalSide
	add	eax, 1
	cdq
	mov	ecx, 6
	idiv	ecx
	mov	DWORD PTR _EditPortalSide, edx
$L81349:

; 399  : 
; 400  : 	if (!CurrentPortal->Region)

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	cmp	DWORD PTR [eax], 0
	jne	SHORT $L81350

; 401  : 		EditPortalSide %= 4;

	mov	eax, DWORD PTR _EditPortalSide
	and	eax, -2147483645			; 80000003H
	jns	SHORT $L81656
	dec	eax
	or	eax, -4					; fffffffcH
	inc	eax
$L81656:
	mov	DWORD PTR _EditPortalSide, eax
$L81350:

; 402  : 
; 403  : // resize?
; 404  : 
; 405  : 	add = 0;

	mov	DWORD PTR _add$[ebp], 0

; 406  : 	if (Keys[DIK_NUMPADSTAR])

	movsx	eax, BYTE PTR ?Keys@@3PADA+55
	test	eax, eax
	je	SHORT $L81351

; 407  : 		add = 4 * TimeFactor;

	fld	DWORD PTR __real@40800000
	fmul	DWORD PTR ?TimeFactor@@3MA		; TimeFactor
	fstp	DWORD PTR _add$[ebp]
$L81351:

; 408  : 	if (Keys[DIK_NUMPADSLASH])

	movsx	eax, BYTE PTR ?Keys@@3PADA+181
	test	eax, eax
	je	SHORT $L81352

; 409  : 		add = -4 * TimeFactor;

	fld	DWORD PTR __real@c0800000
	fmul	DWORD PTR ?TimeFactor@@3MA		; TimeFactor
	fstp	DWORD PTR _add$[ebp]
$L81352:

; 410  : 
; 411  : 	if (Keys[DIK_LCONTROL]) add *= 4;

	movsx	eax, BYTE PTR ?Keys@@3PADA+29
	test	eax, eax
	je	SHORT $L81353
	fld	DWORD PTR _add$[ebp]
	fmul	DWORD PTR __real@40800000
	fstp	DWORD PTR _add$[ebp]
$L81353:

; 412  : 
; 413  : 	if (add)

	fld	DWORD PTR __real@00000000
	fld	DWORD PTR _add$[ebp]
	fucompp
	fnstsw	ax
	test	ah, 68					; 00000044H
	jnp	$L81354

; 414  : 	{
; 415  : 		if (Keys[DIK_LSHIFT])

	movsx	eax, BYTE PTR ?Keys@@3PADA+42
	test	eax, eax
	je	$L81355

; 416  : 		{
; 417  : 			CurrentPortal->Size[X] += add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fadd	DWORD PTR [eax+60]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+60]

; 418  : 			if (CurrentPortal->Size[X] < 16) CurrentPortal->Size[X] = 16;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+60]
	fcomp	DWORD PTR __real@41800000
	fnstsw	ax
	test	ah, 5
	jp	SHORT $L81356
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	DWORD PTR [eax+60], 1098907648		; 41800000H
$L81356:

; 419  : 			CurrentPortal->Size[Y] += add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fadd	DWORD PTR [eax+64]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+64]

; 420  : 			if (CurrentPortal->Size[Y] < 16) CurrentPortal->Size[Y] = 16;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+64]
	fcomp	DWORD PTR __real@41800000
	fnstsw	ax
	test	ah, 5
	jp	SHORT $L81357
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	DWORD PTR [eax+64], 1098907648		; 41800000H
$L81357:

; 421  : 			CurrentPortal->Size[Z] += add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fadd	DWORD PTR [eax+68]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+68]

; 422  : 			if (CurrentPortal->Size[Z] < 16) CurrentPortal->Size[Z] = 16;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+68]
	fcomp	DWORD PTR __real@41800000
	fnstsw	ax
	test	ah, 5
	jp	SHORT $L81358
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	DWORD PTR [eax+68], 1098907648		; 41800000H
$L81358:

; 423  : 		}
; 424  : 		else

	jmp	$L81354
$L81355:

; 425  : 		{
; 426  : 			switch (EditPortalSide)

	mov	eax, DWORD PTR _EditPortalSide
	mov	DWORD PTR tv702[ebp], eax
	cmp	DWORD PTR tv702[ebp], 5
	ja	$L81354
	mov	ecx, DWORD PTR tv702[ebp]
	jmp	DWORD PTR $L81657[ecx*4]
$L81364:

; 427  : 			{
; 428  : 				case 0:
; 429  : 					CurrentPortal->Size[X] += add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fadd	DWORD PTR [eax+60]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+60]

; 430  : 					if (CurrentPortal->Size[X] < 16) CurrentPortal->Size[X] = 16;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+60]
	fcomp	DWORD PTR __real@41800000
	fnstsw	ax
	test	ah, 5
	jp	SHORT $L81365
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	DWORD PTR [eax+60], 1098907648		; 41800000H
$L81365:

; 431  : 					CurrentPortal->Pos.v[X] += CurrentPortal->Matrix.m[RX] * add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fmul	DWORD PTR [eax+24]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fadd	DWORD PTR [ecx+12]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [edx+12]

; 432  : 					CurrentPortal->Pos.v[Y] += CurrentPortal->Matrix.m[RY] * add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fmul	DWORD PTR [eax+28]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fadd	DWORD PTR [ecx+16]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [edx+16]

; 433  : 					CurrentPortal->Pos.v[Z] += CurrentPortal->Matrix.m[RZ] * add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fmul	DWORD PTR [eax+32]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fadd	DWORD PTR [ecx+20]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [edx+20]

; 434  : 					break;

	jmp	$L81354
$L81366:

; 435  : 				case 1:
; 436  : 					CurrentPortal->Size[X] += add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fadd	DWORD PTR [eax+60]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+60]

; 437  : 					if (CurrentPortal->Size[X] < 16) CurrentPortal->Size[X] = 16;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+60]
	fcomp	DWORD PTR __real@41800000
	fnstsw	ax
	test	ah, 5
	jp	SHORT $L81367
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	DWORD PTR [eax+60], 1098907648		; 41800000H
$L81367:

; 438  : 					CurrentPortal->Pos.v[X] -= CurrentPortal->Matrix.m[RX] * add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fmul	DWORD PTR [eax+24]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fsubr	DWORD PTR [ecx+12]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [edx+12]

; 439  : 					CurrentPortal->Pos.v[Y] -= CurrentPortal->Matrix.m[RY] * add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fmul	DWORD PTR [eax+28]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fsubr	DWORD PTR [ecx+16]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [edx+16]

; 440  : 					CurrentPortal->Pos.v[Z] -= CurrentPortal->Matrix.m[RZ] * add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fmul	DWORD PTR [eax+32]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fsubr	DWORD PTR [ecx+20]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [edx+20]

; 441  : 					break;

	jmp	$L81354
$L81368:

; 442  : 				case 2:
; 443  : 					CurrentPortal->Size[Y] += add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fadd	DWORD PTR [eax+64]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+64]

; 444  : 					if (CurrentPortal->Size[Y] < 16) CurrentPortal->Size[Y] = 16;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+64]
	fcomp	DWORD PTR __real@41800000
	fnstsw	ax
	test	ah, 5
	jp	SHORT $L81369
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	DWORD PTR [eax+64], 1098907648		; 41800000H
$L81369:

; 445  : 					CurrentPortal->Pos.v[X] += CurrentPortal->Matrix.m[UX] * add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fmul	DWORD PTR [eax+36]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fadd	DWORD PTR [ecx+12]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [edx+12]

; 446  : 					CurrentPortal->Pos.v[Y] += CurrentPortal->Matrix.m[UY] * add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fmul	DWORD PTR [eax+40]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fadd	DWORD PTR [ecx+16]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [edx+16]

; 447  : 					CurrentPortal->Pos.v[Z] += CurrentPortal->Matrix.m[UZ] * add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fmul	DWORD PTR [eax+44]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fadd	DWORD PTR [ecx+20]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [edx+20]

; 448  : 					break;

	jmp	$L81354
$L81370:

; 449  : 				case 3:
; 450  : 					CurrentPortal->Size[Y] += add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fadd	DWORD PTR [eax+64]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+64]

; 451  : 					if (CurrentPortal->Size[Y] < 16) CurrentPortal->Size[Y] = 16;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+64]
	fcomp	DWORD PTR __real@41800000
	fnstsw	ax
	test	ah, 5
	jp	SHORT $L81371
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	DWORD PTR [eax+64], 1098907648		; 41800000H
$L81371:

; 452  : 					CurrentPortal->Pos.v[X] -= CurrentPortal->Matrix.m[UX] * add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fmul	DWORD PTR [eax+36]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fsubr	DWORD PTR [ecx+12]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [edx+12]

; 453  : 					CurrentPortal->Pos.v[Y] -= CurrentPortal->Matrix.m[UY] * add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fmul	DWORD PTR [eax+40]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fsubr	DWORD PTR [ecx+16]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [edx+16]

; 454  : 					CurrentPortal->Pos.v[Z] -= CurrentPortal->Matrix.m[UZ] * add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fmul	DWORD PTR [eax+44]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fsubr	DWORD PTR [ecx+20]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [edx+20]

; 455  : 					break;

	jmp	$L81354
$L81372:

; 456  : 				case 4:
; 457  : 					CurrentPortal->Size[Z] += add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fadd	DWORD PTR [eax+68]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+68]

; 458  : 					if (CurrentPortal->Size[Z] < 16) CurrentPortal->Size[Z] = 16;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+68]
	fcomp	DWORD PTR __real@41800000
	fnstsw	ax
	test	ah, 5
	jp	SHORT $L81373
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	DWORD PTR [eax+68], 1098907648		; 41800000H
$L81373:

; 459  : 					CurrentPortal->Pos.v[X] += CurrentPortal->Matrix.m[LX] * add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fmul	DWORD PTR [eax+48]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fadd	DWORD PTR [ecx+12]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [edx+12]

; 460  : 					CurrentPortal->Pos.v[Y] += CurrentPortal->Matrix.m[LY] * add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fmul	DWORD PTR [eax+52]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fadd	DWORD PTR [ecx+16]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [edx+16]

; 461  : 					CurrentPortal->Pos.v[Z] += CurrentPortal->Matrix.m[LZ] * add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fmul	DWORD PTR [eax+56]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fadd	DWORD PTR [ecx+20]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [edx+20]

; 462  : 					break;

	jmp	$L81354
$L81374:

; 463  : 				case 5:
; 464  : 					CurrentPortal->Size[Z] += add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fadd	DWORD PTR [eax+68]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+68]

; 465  : 					if (CurrentPortal->Size[Z] < 16) CurrentPortal->Size[Z] = 16;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+68]
	fcomp	DWORD PTR __real@41800000
	fnstsw	ax
	test	ah, 5
	jp	SHORT $L81375
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	DWORD PTR [eax+68], 1098907648		; 41800000H
$L81375:

; 466  : 					CurrentPortal->Pos.v[X] -= CurrentPortal->Matrix.m[LX] * add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fmul	DWORD PTR [eax+48]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fsubr	DWORD PTR [ecx+12]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [edx+12]

; 467  : 					CurrentPortal->Pos.v[Y] -= CurrentPortal->Matrix.m[LY] * add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fmul	DWORD PTR [eax+52]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fsubr	DWORD PTR [ecx+16]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [edx+16]

; 468  : 					CurrentPortal->Pos.v[Z] -= CurrentPortal->Matrix.m[LZ] * add;

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _add$[ebp]
	fmul	DWORD PTR [eax+56]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fsubr	DWORD PTR [ecx+20]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [edx+20]
$L81354:

; 469  : 					break;
; 470  : 			}
; 471  : 		}
; 472  : 	}
; 473  : 
; 474  : // move?
; 475  : 
; 476  : 	if (MouseLeft)

	movsx	eax, BYTE PTR ?MouseLeft@@3DA		; MouseLeft
	test	eax, eax
	je	$L81376

; 477  : 	{
; 478  : 		RotTransVector(&ViewMatrix, &ViewTrans, &CurrentPortal->Pos, &vec);

	lea	eax, DWORD PTR _vec$[ebp]
	push	eax
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	add	ecx, 12					; 0000000cH
	push	ecx
	push	OFFSET FLAT:?ViewTrans@@3UVectorStruct@@A ; ViewTrans
	push	OFFSET FLAT:?ViewMatrix@@3TMatrixUnion@@A ; ViewMatrix
	call	?RotTransVector@@YAXPATMatrixUnion@@PAUVectorStruct@@11@Z ; RotTransVector
	add	esp, 16					; 00000010H

; 479  : 
; 480  : 		switch (EditPortalAxis)

	mov	eax, DWORD PTR _EditPortalAxis
	mov	DWORD PTR tv927[ebp], eax
	cmp	DWORD PTR tv927[ebp], 5
	ja	$L81378
	mov	ecx, DWORD PTR tv927[ebp]
	jmp	DWORD PTR $L81658[ecx*4]
$L81381:

; 481  : 		{
; 482  : 			case PORTAL_AXIS_XY:
; 483  : 				vec.v[X] = MouseXrel * vec.v[Z] / RenderSettings.GeomPers + CameraEditXrel;

	fld	DWORD PTR ?MouseXrel@@3MA		; MouseXrel
	fmul	DWORD PTR _vec$[ebp+8]
	fdiv	DWORD PTR ?RenderSettings@@3URENDER_SETTINGS@@A
	fadd	DWORD PTR ?CameraEditXrel@@3MA		; CameraEditXrel
	fstp	DWORD PTR _vec$[ebp]

; 484  : 				vec.v[Y] = MouseYrel * vec.v[Z] / RenderSettings.GeomPers + CameraEditYrel;

	fld	DWORD PTR ?MouseYrel@@3MA		; MouseYrel
	fmul	DWORD PTR _vec$[ebp+8]
	fdiv	DWORD PTR ?RenderSettings@@3URENDER_SETTINGS@@A
	fadd	DWORD PTR ?CameraEditYrel@@3MA		; CameraEditYrel
	fstp	DWORD PTR _vec$[ebp+4]

; 485  : 				vec.v[Z] = CameraEditZrel;

	mov	eax, DWORD PTR ?CameraEditZrel@@3MA
	mov	DWORD PTR _vec$[ebp+8], eax

; 486  : 				break;

	jmp	$L81378
$L81382:

; 487  : 			case PORTAL_AXIS_XZ:
; 488  : 				vec.v[X] = MouseXrel * vec.v[Z] / RenderSettings.GeomPers + CameraEditXrel;

	fld	DWORD PTR ?MouseXrel@@3MA		; MouseXrel
	fmul	DWORD PTR _vec$[ebp+8]
	fdiv	DWORD PTR ?RenderSettings@@3URENDER_SETTINGS@@A
	fadd	DWORD PTR ?CameraEditXrel@@3MA		; CameraEditXrel
	fstp	DWORD PTR _vec$[ebp]

; 489  : 				vec.v[Y] = CameraEditYrel;

	mov	eax, DWORD PTR ?CameraEditYrel@@3MA
	mov	DWORD PTR _vec$[ebp+4], eax

; 490  : 				vec.v[Z] = -MouseYrel * vec.v[Z] / RenderSettings.GeomPers + CameraEditZrel;

	fld	DWORD PTR ?MouseYrel@@3MA		; MouseYrel
	fchs
	fmul	DWORD PTR _vec$[ebp+8]
	fdiv	DWORD PTR ?RenderSettings@@3URENDER_SETTINGS@@A
	fadd	DWORD PTR ?CameraEditZrel@@3MA		; CameraEditZrel
	fstp	DWORD PTR _vec$[ebp+8]

; 491  : 				break;

	jmp	$L81378
$L81383:

; 492  : 			case PORTAL_AXIS_ZY:
; 493  : 				vec.v[X] = CameraEditXrel;

	mov	eax, DWORD PTR ?CameraEditXrel@@3MA
	mov	DWORD PTR _vec$[ebp], eax

; 494  : 				vec.v[Y] = MouseYrel * vec.v[Z] / RenderSettings.GeomPers + CameraEditYrel;

	fld	DWORD PTR ?MouseYrel@@3MA		; MouseYrel
	fmul	DWORD PTR _vec$[ebp+8]
	fdiv	DWORD PTR ?RenderSettings@@3URENDER_SETTINGS@@A
	fadd	DWORD PTR ?CameraEditYrel@@3MA		; CameraEditYrel
	fstp	DWORD PTR _vec$[ebp+4]

; 495  : 				vec.v[Z] = MouseXrel * vec.v[Z] / RenderSettings.GeomPers + CameraEditZrel;

	fld	DWORD PTR ?MouseXrel@@3MA		; MouseXrel
	fmul	DWORD PTR _vec$[ebp+8]
	fdiv	DWORD PTR ?RenderSettings@@3URENDER_SETTINGS@@A
	fadd	DWORD PTR ?CameraEditZrel@@3MA		; CameraEditZrel
	fstp	DWORD PTR _vec$[ebp+8]

; 496  : 				break;

	jmp	SHORT $L81378
$L81384:

; 497  : 			case PORTAL_AXIS_X:
; 498  : 				vec.v[X] = MouseXrel * vec.v[Z] / RenderSettings.GeomPers + CameraEditXrel;

	fld	DWORD PTR ?MouseXrel@@3MA		; MouseXrel
	fmul	DWORD PTR _vec$[ebp+8]
	fdiv	DWORD PTR ?RenderSettings@@3URENDER_SETTINGS@@A
	fadd	DWORD PTR ?CameraEditXrel@@3MA		; CameraEditXrel
	fstp	DWORD PTR _vec$[ebp]

; 499  : 				vec.v[Y] = CameraEditYrel;

	mov	eax, DWORD PTR ?CameraEditYrel@@3MA
	mov	DWORD PTR _vec$[ebp+4], eax

; 500  : 				vec.v[Z] = CameraEditZrel;

	mov	eax, DWORD PTR ?CameraEditZrel@@3MA
	mov	DWORD PTR _vec$[ebp+8], eax

; 501  : 				break;

	jmp	SHORT $L81378
$L81385:

; 502  : 			case PORTAL_AXIS_Y:
; 503  : 				vec.v[X] = CameraEditXrel;

	mov	eax, DWORD PTR ?CameraEditXrel@@3MA
	mov	DWORD PTR _vec$[ebp], eax

; 504  : 				vec.v[Y] = MouseYrel * vec.v[Z] / RenderSettings.GeomPers + CameraEditYrel;

	fld	DWORD PTR ?MouseYrel@@3MA		; MouseYrel
	fmul	DWORD PTR _vec$[ebp+8]
	fdiv	DWORD PTR ?RenderSettings@@3URENDER_SETTINGS@@A
	fadd	DWORD PTR ?CameraEditYrel@@3MA		; CameraEditYrel
	fstp	DWORD PTR _vec$[ebp+4]

; 505  : 				vec.v[Z] = CameraEditZrel;

	mov	eax, DWORD PTR ?CameraEditZrel@@3MA
	mov	DWORD PTR _vec$[ebp+8], eax

; 506  : 				break;

	jmp	SHORT $L81378
$L81386:

; 507  : 			case PORTAL_AXIS_Z:
; 508  : 				vec.v[X] = CameraEditXrel;

	mov	eax, DWORD PTR ?CameraEditXrel@@3MA
	mov	DWORD PTR _vec$[ebp], eax

; 509  : 				vec.v[Y] = CameraEditYrel;

	mov	eax, DWORD PTR ?CameraEditYrel@@3MA
	mov	DWORD PTR _vec$[ebp+4], eax

; 510  : 				vec.v[Z] = -MouseYrel * vec.v[Z] / RenderSettings.GeomPers + CameraEditZrel;

	fld	DWORD PTR ?MouseYrel@@3MA		; MouseYrel
	fchs
	fmul	DWORD PTR _vec$[ebp+8]
	fdiv	DWORD PTR ?RenderSettings@@3URENDER_SETTINGS@@A
	fadd	DWORD PTR ?CameraEditZrel@@3MA		; CameraEditZrel
	fstp	DWORD PTR _vec$[ebp+8]
$L81378:

; 511  : 				break;
; 512  : 		}
; 513  : 
; 514  : 		if (EditPortalAxisType == 1) 

	cmp	DWORD PTR _EditPortalAxisType, 1
	jne	SHORT $L81387

; 515  : 		{
; 516  : 			SetVector(&vec2, vec.v[X], vec.v[Y], vec.v[Z]);

	mov	eax, DWORD PTR _vec$[ebp]
	mov	DWORD PTR _vec2$[ebp], eax
	mov	eax, DWORD PTR _vec$[ebp+4]
	mov	DWORD PTR _vec2$[ebp+4], eax
	mov	eax, DWORD PTR _vec$[ebp+8]
	mov	DWORD PTR _vec2$[ebp+8], eax

; 517  : 		}
; 518  : 		else

	jmp	SHORT $L81388
$L81387:

; 519  : 		{
; 520  : 			RotVector(&CAM_MainCamera->WMatrix, &vec, &vec2);

	lea	eax, DWORD PTR _vec2$[ebp]
	push	eax
	lea	ecx, DWORD PTR _vec$[ebp]
	push	ecx
	mov	edx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	add	edx, 16					; 00000010H
	push	edx
	call	?RotVector@@YAXPATMatrixUnion@@PAUVectorStruct@@1@Z ; RotVector
	add	esp, 12					; 0000000cH
$L81388:

; 521  : 		}
; 522  : 
; 523  : 		CurrentPortal->Pos.v[X] += vec2.v[X];

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _vec2$[ebp]
	fadd	DWORD PTR [eax+12]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+12]

; 524  : 		CurrentPortal->Pos.v[Y] += vec2.v[Y];

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _vec2$[ebp+4]
	fadd	DWORD PTR [eax+16]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+16]

; 525  : 		CurrentPortal->Pos.v[Z] += vec2.v[Z];

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR _vec2$[ebp+8]
	fadd	DWORD PTR [eax+20]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+20]
$L81376:

; 526  : 	}
; 527  : 
; 528  : // rotate?
; 529  : 
; 530  : 	vec.v[X] = vec.v[Y] = vec.v[Z] = 0;

	mov	DWORD PTR _vec$[ebp+8], 0
	mov	eax, DWORD PTR _vec$[ebp+8]
	mov	DWORD PTR _vec$[ebp+4], eax
	mov	ecx, DWORD PTR _vec$[ebp+4]
	mov	DWORD PTR _vec$[ebp], ecx

; 531  : 
; 532  : 	if (Keys[DIK_NUMPAD7]) vec.v[X] -= 0.001f;

	movsx	eax, BYTE PTR ?Keys@@3PADA+71
	test	eax, eax
	je	SHORT $L81389
	fld	DWORD PTR _vec$[ebp]
	fsub	DWORD PTR __real@3a83126f
	fstp	DWORD PTR _vec$[ebp]
$L81389:

; 533  : 	if (Keys[DIK_NUMPAD4]) vec.v[X] += 0.001f;

	movsx	eax, BYTE PTR ?Keys@@3PADA+75
	test	eax, eax
	je	SHORT $L81390
	fld	DWORD PTR _vec$[ebp]
	fadd	DWORD PTR __real@3a83126f
	fstp	DWORD PTR _vec$[ebp]
$L81390:

; 534  : 	if (Keys[DIK_NUMPAD8]) vec.v[Y] -= 0.001f;

	movsx	eax, BYTE PTR ?Keys@@3PADA+72
	test	eax, eax
	je	SHORT $L81391
	fld	DWORD PTR _vec$[ebp+4]
	fsub	DWORD PTR __real@3a83126f
	fstp	DWORD PTR _vec$[ebp+4]
$L81391:

; 535  : 	if (Keys[DIK_NUMPAD5]) vec.v[Y] += 0.001f;

	movsx	eax, BYTE PTR ?Keys@@3PADA+76
	test	eax, eax
	je	SHORT $L81392
	fld	DWORD PTR _vec$[ebp+4]
	fadd	DWORD PTR __real@3a83126f
	fstp	DWORD PTR _vec$[ebp+4]
$L81392:

; 536  : 	if (Keys[DIK_NUMPAD9]) vec.v[Z] -= 0.001f;

	movsx	eax, BYTE PTR ?Keys@@3PADA+73
	test	eax, eax
	je	SHORT $L81393
	fld	DWORD PTR _vec$[ebp+8]
	fsub	DWORD PTR __real@3a83126f
	fstp	DWORD PTR _vec$[ebp+8]
$L81393:

; 537  : 	if (Keys[DIK_NUMPAD6]) vec.v[Z] += 0.001f;

	movsx	eax, BYTE PTR ?Keys@@3PADA+77
	test	eax, eax
	je	SHORT $L81394
	fld	DWORD PTR _vec$[ebp+8]
	fadd	DWORD PTR __real@3a83126f
	fstp	DWORD PTR _vec$[ebp+8]
$L81394:

; 538  : 
; 539  : 	if (Keys[DIK_NUMPAD1] && !LastKeys[DIK_NUMPAD1]) vec.v[X] += 0.25f;

	movsx	eax, BYTE PTR ?Keys@@3PADA+79
	test	eax, eax
	je	SHORT $L81395
	movsx	eax, BYTE PTR ?LastKeys@@3PADA+79
	test	eax, eax
	jne	SHORT $L81395
	fld	DWORD PTR _vec$[ebp]
	fadd	DWORD PTR __real@3e800000
	fstp	DWORD PTR _vec$[ebp]
$L81395:

; 540  : 	if (Keys[DIK_NUMPAD2] && !LastKeys[DIK_NUMPAD2]) vec.v[Y] += 0.25f;

	movsx	eax, BYTE PTR ?Keys@@3PADA+80
	test	eax, eax
	je	SHORT $L81396
	movsx	eax, BYTE PTR ?LastKeys@@3PADA+80
	test	eax, eax
	jne	SHORT $L81396
	fld	DWORD PTR _vec$[ebp+4]
	fadd	DWORD PTR __real@3e800000
	fstp	DWORD PTR _vec$[ebp+4]
$L81396:

; 541  : 	if (Keys[DIK_NUMPAD3] && !LastKeys[DIK_NUMPAD3]) vec.v[Z] += 0.25f;

	movsx	eax, BYTE PTR ?Keys@@3PADA+81
	test	eax, eax
	je	SHORT $L81397
	movsx	eax, BYTE PTR ?LastKeys@@3PADA+81
	test	eax, eax
	jne	SHORT $L81397
	fld	DWORD PTR _vec$[ebp+8]
	fadd	DWORD PTR __real@3e800000
	fstp	DWORD PTR _vec$[ebp+8]
$L81397:

; 542  : 
; 543  : 	if (Keys[DIK_NUMPAD0]) CopyMatrix(&IdentityMatrix, &CurrentPortal->Matrix);

	movsx	eax, BYTE PTR ?Keys@@3PADA+82
	test	eax, eax
	je	SHORT $L81398
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	add	eax, 24					; 00000018H
	push	eax
	push	OFFSET FLAT:?IdentityMatrix@@3TMatrixUnion@@A ; IdentityMatrix
	call	?CopyMatrix@@YAXPATMatrixUnion@@0@Z	; CopyMatrix
	add	esp, 8
$L81398:

; 544  : 
; 545  : 	RotMatrixZYX(&mat, vec.v[X], vec.v[Y], vec.v[Z]);

	mov	eax, DWORD PTR _vec$[ebp+8]
	push	eax
	mov	ecx, DWORD PTR _vec$[ebp+4]
	push	ecx
	mov	edx, DWORD PTR _vec$[ebp]
	push	edx
	lea	eax, DWORD PTR _mat$[ebp]
	push	eax
	call	?RotMatrixZYX@@YAXPATMatrixUnion@@MMM@Z	; RotMatrixZYX
	add	esp, 16					; 00000010H

; 546  : 
; 547  : 	if (EditPortalAxisType)

	cmp	DWORD PTR _EditPortalAxisType, 0
	je	$L81399

; 548  : 	{
; 549  : 		MulMatrix(&mat, &CurrentPortal->Matrix, &mat2);

	lea	eax, DWORD PTR _mat2$[ebp]
	push	eax
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	add	ecx, 24					; 00000018H
	push	ecx
	lea	edx, DWORD PTR _mat$[ebp]
	push	edx
	call	?MulMatrix@@YAXPATMatrixUnion@@00@Z	; MulMatrix
	add	esp, 12					; 0000000cH

; 550  : 		CopyMatrix(&mat2, &CurrentPortal->Matrix);

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	add	eax, 24					; 00000018H
	push	eax
	lea	ecx, DWORD PTR _mat2$[ebp]
	push	ecx
	call	?CopyMatrix@@YAXPATMatrixUnion@@0@Z	; CopyMatrix
	add	esp, 8

; 551  : 		NormalizeMatrix(&CurrentPortal->Matrix);

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+36]
	fmul	DWORD PTR [ecx+36]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [edx+40]
	fmul	DWORD PTR [eax+40]
	faddp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [ecx+44]
	fmul	DWORD PTR [edx+44]
	faddp	ST(1), ST(0)
	push	ecx
	fstp	DWORD PTR [esp]
	call	?sqrt@@YAMM@Z				; sqrt
	add	esp, 4
	fdivr	DWORD PTR __real@3f800000
	fstp	DWORD PTR __mul$81400[ebp]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR __mul$81400[ebp]
	fmul	DWORD PTR [eax+36]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+36]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR __mul$81400[ebp]
	fmul	DWORD PTR [eax+40]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+40]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR __mul$81400[ebp]
	fmul	DWORD PTR [eax+44]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+44]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+48]
	fmul	DWORD PTR [ecx+48]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [edx+52]
	fmul	DWORD PTR [eax+52]
	faddp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [ecx+56]
	fmul	DWORD PTR [edx+56]
	faddp	ST(1), ST(0)
	push	ecx
	fstp	DWORD PTR [esp]
	call	?sqrt@@YAMM@Z				; sqrt
	add	esp, 4
	fdivr	DWORD PTR __real@3f800000
	fstp	DWORD PTR __mul$81402[ebp]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR __mul$81402[ebp]
	fmul	DWORD PTR [eax+48]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+48]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR __mul$81402[ebp]
	fmul	DWORD PTR [eax+52]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+52]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR __mul$81402[ebp]
	fmul	DWORD PTR [eax+56]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+56]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+40]
	fmul	DWORD PTR [ecx+56]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [edx+44]
	fmul	DWORD PTR [eax+52]
	fsubp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+24]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+44]
	fmul	DWORD PTR [ecx+48]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [edx+36]
	fmul	DWORD PTR [eax+56]
	fsubp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+28]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+36]
	fmul	DWORD PTR [ecx+52]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [edx+40]
	fmul	DWORD PTR [eax+48]
	fsubp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+32]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+52]
	fmul	DWORD PTR [ecx+32]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [edx+56]
	fmul	DWORD PTR [eax+28]
	fsubp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+36]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+56]
	fmul	DWORD PTR [ecx+24]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [edx+48]
	fmul	DWORD PTR [eax+32]
	fsubp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+40]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+48]
	fmul	DWORD PTR [ecx+28]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [edx+52]
	fmul	DWORD PTR [eax+24]
	fsubp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+44]

; 552  : 	}
; 553  : 	else if (vec.v[X] || vec.v[Y] || vec.v[Z])

	jmp	$L81282
$L81399:
	fld	DWORD PTR __real@00000000
	fld	DWORD PTR _vec$[ebp]
	fucompp
	fnstsw	ax
	test	ah, 68					; 00000044H
	jp	SHORT $L81406
	fld	DWORD PTR __real@00000000
	fld	DWORD PTR _vec$[ebp+4]
	fucompp
	fnstsw	ax
	test	ah, 68					; 00000044H
	jp	SHORT $L81406
	fld	DWORD PTR __real@00000000
	fld	DWORD PTR _vec$[ebp+8]
	fucompp
	fnstsw	ax
	test	ah, 68					; 00000044H
	jnp	$L81282
$L81406:

; 554  : 	{
; 555  : 		RotVector(&ViewMatrix, &CurrentPortal->Matrix.mv[X], &r);

	lea	eax, DWORD PTR _r$[ebp]
	push	eax
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	add	ecx, 24					; 00000018H
	push	ecx
	push	OFFSET FLAT:?ViewMatrix@@3TMatrixUnion@@A ; ViewMatrix
	call	?RotVector@@YAXPATMatrixUnion@@PAUVectorStruct@@1@Z ; RotVector
	add	esp, 12					; 0000000cH

; 556  : 		RotVector(&ViewMatrix, &CurrentPortal->Matrix.mv[Y], &u);

	lea	eax, DWORD PTR _u$[ebp]
	push	eax
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	add	ecx, 36					; 00000024H
	push	ecx
	push	OFFSET FLAT:?ViewMatrix@@3TMatrixUnion@@A ; ViewMatrix
	call	?RotVector@@YAXPATMatrixUnion@@PAUVectorStruct@@1@Z ; RotVector
	add	esp, 12					; 0000000cH

; 557  : 		RotVector(&ViewMatrix, &CurrentPortal->Matrix.mv[Z], &l);

	lea	eax, DWORD PTR _l$[ebp]
	push	eax
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	add	ecx, 48					; 00000030H
	push	ecx
	push	OFFSET FLAT:?ViewMatrix@@3TMatrixUnion@@A ; ViewMatrix
	call	?RotVector@@YAXPATMatrixUnion@@PAUVectorStruct@@1@Z ; RotVector
	add	esp, 12					; 0000000cH

; 558  : 
; 559  : 		RotVector(&mat, &r, &r2);

	lea	eax, DWORD PTR _r2$[ebp]
	push	eax
	lea	ecx, DWORD PTR _r$[ebp]
	push	ecx
	lea	edx, DWORD PTR _mat$[ebp]
	push	edx
	call	?RotVector@@YAXPATMatrixUnion@@PAUVectorStruct@@1@Z ; RotVector
	add	esp, 12					; 0000000cH

; 560  : 		RotVector(&mat, &u, &u2);

	lea	eax, DWORD PTR _u2$[ebp]
	push	eax
	lea	ecx, DWORD PTR _u$[ebp]
	push	ecx
	lea	edx, DWORD PTR _mat$[ebp]
	push	edx
	call	?RotVector@@YAXPATMatrixUnion@@PAUVectorStruct@@1@Z ; RotVector
	add	esp, 12					; 0000000cH

; 561  : 		RotVector(&mat, &l, &l2);

	lea	eax, DWORD PTR _l2$[ebp]
	push	eax
	lea	ecx, DWORD PTR _l$[ebp]
	push	ecx
	lea	edx, DWORD PTR _mat$[ebp]
	push	edx
	call	?RotVector@@YAXPATMatrixUnion@@PAUVectorStruct@@1@Z ; RotVector
	add	esp, 12					; 0000000cH

; 562  : 
; 563  : 		RotVector(&CAM_MainCamera->WMatrix, &r2, &CurrentPortal->Matrix.mv[X]);

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	add	eax, 24					; 00000018H
	push	eax
	lea	ecx, DWORD PTR _r2$[ebp]
	push	ecx
	mov	edx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	add	edx, 16					; 00000010H
	push	edx
	call	?RotVector@@YAXPATMatrixUnion@@PAUVectorStruct@@1@Z ; RotVector
	add	esp, 12					; 0000000cH

; 564  : 		RotVector(&CAM_MainCamera->WMatrix, &u2, &CurrentPortal->Matrix.mv[Y]);

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	add	eax, 36					; 00000024H
	push	eax
	lea	ecx, DWORD PTR _u2$[ebp]
	push	ecx
	mov	edx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	add	edx, 16					; 00000010H
	push	edx
	call	?RotVector@@YAXPATMatrixUnion@@PAUVectorStruct@@1@Z ; RotVector
	add	esp, 12					; 0000000cH

; 565  : 		RotVector(&CAM_MainCamera->WMatrix, &l2, &CurrentPortal->Matrix.mv[Z]);

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	add	eax, 48					; 00000030H
	push	eax
	lea	ecx, DWORD PTR _l2$[ebp]
	push	ecx
	mov	edx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	add	edx, 16					; 00000010H
	push	edx
	call	?RotVector@@YAXPATMatrixUnion@@PAUVectorStruct@@1@Z ; RotVector
	add	esp, 12					; 0000000cH

; 566  : 
; 567  : 		NormalizeMatrix(&CurrentPortal->Matrix);

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+36]
	fmul	DWORD PTR [ecx+36]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [edx+40]
	fmul	DWORD PTR [eax+40]
	faddp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [ecx+44]
	fmul	DWORD PTR [edx+44]
	faddp	ST(1), ST(0)
	push	ecx
	fstp	DWORD PTR [esp]
	call	?sqrt@@YAMM@Z				; sqrt
	add	esp, 4
	fdivr	DWORD PTR __real@3f800000
	fstp	DWORD PTR __mul$81407[ebp]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR __mul$81407[ebp]
	fmul	DWORD PTR [eax+36]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+36]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR __mul$81407[ebp]
	fmul	DWORD PTR [eax+40]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+40]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR __mul$81407[ebp]
	fmul	DWORD PTR [eax+44]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+44]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+48]
	fmul	DWORD PTR [ecx+48]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [edx+52]
	fmul	DWORD PTR [eax+52]
	faddp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [ecx+56]
	fmul	DWORD PTR [edx+56]
	faddp	ST(1), ST(0)
	push	ecx
	fstp	DWORD PTR [esp]
	call	?sqrt@@YAMM@Z				; sqrt
	add	esp, 4
	fdivr	DWORD PTR __real@3f800000
	fstp	DWORD PTR __mul$81409[ebp]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR __mul$81409[ebp]
	fmul	DWORD PTR [eax+48]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+48]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR __mul$81409[ebp]
	fmul	DWORD PTR [eax+52]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+52]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR __mul$81409[ebp]
	fmul	DWORD PTR [eax+56]
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+56]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+40]
	fmul	DWORD PTR [ecx+56]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [edx+44]
	fmul	DWORD PTR [eax+52]
	fsubp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+24]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+44]
	fmul	DWORD PTR [ecx+48]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [edx+36]
	fmul	DWORD PTR [eax+56]
	fsubp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+28]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+36]
	fmul	DWORD PTR [ecx+52]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [edx+40]
	fmul	DWORD PTR [eax+48]
	fsubp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+32]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+52]
	fmul	DWORD PTR [ecx+32]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [edx+56]
	fmul	DWORD PTR [eax+28]
	fsubp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+36]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+56]
	fmul	DWORD PTR [ecx+24]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [edx+48]
	fmul	DWORD PTR [eax+32]
	fsubp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+40]
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [eax+48]
	fmul	DWORD PTR [ecx+28]
	mov	edx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fld	DWORD PTR [edx+52]
	fmul	DWORD PTR [eax+24]
	fsubp	ST(1), ST(0)
	mov	ecx, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	fstp	DWORD PTR [ecx+44]
$L81282:

; 568  : 	}
; 569  : }

	pop	edi
	pop	esi
	pop	ebx
	mov	esp, ebp
	pop	ebp
	ret	0
$L81657:
	DD	$L81364
	DD	$L81366
	DD	$L81368
	DD	$L81370
	DD	$L81372
	DD	$L81374
$L81658:
	DD	$L81381
	DD	$L81382
	DD	$L81383
	DD	$L81384
	DD	$L81385
	DD	$L81386
?EditPortals@@YAXXZ ENDP				; EditPortals
_TEXT	ENDS
PUBLIC	_sqrtf
; Function compile flags: /Odt /ZI
; File c:\program files\microsoft visual studio .net 2003\vc7\include\math.h
;	COMDAT ?sqrt@@YAMM@Z
_TEXT	SEGMENT
__X$ = 8						; size = 4
?sqrt@@YAMM@Z PROC NEAR					; sqrt, COMDAT

; 579  :         {return (sqrtf(_X)); }

	push	ebp
	mov	ebp, esp
	sub	esp, 64					; 00000040H
	push	ebx
	push	esi
	push	edi
	mov	eax, DWORD PTR __X$[ebp]
	push	eax
	call	_sqrtf
	add	esp, 4
	pop	edi
	pop	esi
	pop	ebx
	mov	esp, ebp
	pop	ebp
	ret	0
?sqrt@@YAMM@Z ENDP					; sqrt
_TEXT	ENDS
EXTRN	_sqrt:NEAR
; Function compile flags: /Odt /ZI
;	COMDAT _sqrtf
_TEXT	SEGMENT
tv70 = -68						; size = 4
__X$ = 8						; size = 4
_sqrtf	PROC NEAR					; COMDAT

; 470  :         {return ((float)sqrt((double)_X)); }

	push	ebp
	mov	ebp, esp
	sub	esp, 68					; 00000044H
	push	ebx
	push	esi
	push	edi
	fld	DWORD PTR __X$[ebp]
	sub	esp, 8
	fstp	QWORD PTR [esp]
	call	_sqrt
	add	esp, 8
	fst	DWORD PTR tv70[ebp]
	pop	edi
	pop	esi
	pop	ebx
	mov	esp, ebp
	pop	ebp
	ret	0
_sqrtf	ENDP
_TEXT	ENDS
PUBLIC	??_C@_02DPKJAMEF@?$CFd?$AA@			; `string'
PUBLIC	?DrawPortals@@YAXXZ				; DrawPortals
EXTRN	?DrawAxis@@YAXPATMatrixUnion@@PAUVectorStruct@@@Z:NEAR ; DrawAxis
EXTRN	?DumpText3D@@YAXPAUVectorStruct@@MMJPAD@Z:NEAR	; DumpText3D
EXTRN	?DxState@@3UDX_STATE@@A:BYTE			; DxState
EXTRN	?D3Ddevice@@3PAUIDirect3DDevice3@@A:DWORD	; D3Ddevice
EXTRN	?RenderStateChange@@3JA:DWORD			; RenderStateChange
EXTRN	?TextureStateChange@@3JA:DWORD			; TextureStateChange
EXTRN	?RenderTP@@3FA:WORD				; RenderTP
EXTRN	?RenderAlpha@@3FA:WORD				; RenderAlpha
EXTRN	?RenderAlphaSrc@@3FA:WORD			; RenderAlphaSrc
EXTRN	?RenderAlphaDest@@3FA:WORD			; RenderAlphaDest
EXTRN	?RenderZbuffer@@3FA:WORD			; RenderZbuffer
EXTRN	?ViewCameraPos@@3UVectorStruct@@A:BYTE		; ViewCameraPos
EXTRN	?FrameCount@@3KA:DWORD				; FrameCount
EXTRN	?MatMulScalar@@YAXPATMatrixUnion@@M@Z:NEAR	; MatMulScalar
EXTRN	?TexInfo@@3PAUTEXINFO@@A:DWORD			; TexInfo
EXTRN	?DrawNearClipPolyTEX0@@YAXPAUVectorStruct@@PAJJ@Z:NEAR ; DrawNearClipPolyTEX0
;	COMDAT ??_C@_02DPKJAMEF@?$CFd?$AA@
; File c:\documents and settings\jarhead\desktop\shit to display my love for xbox revolt and fuck you borman-ness\revolt source\source\edportal.cpp
CONST	SEGMENT
??_C@_02DPKJAMEF@?$CFd?$AA@ DB '%d', 00H		; `string'
; Function compile flags: /Odt /ZI
CONST	ENDS
;	COMDAT ?DrawPortals@@YAXXZ
_TEXT	SEGMENT
tv782 = -520						; size = 4
_buf$ = -452						; size = 128
_vec$ = -324						; size = 12
_mat$ = -312						; size = 36
_pos$ = -276						; size = 48
_vpos$ = -228						; size = 96
_v$ = -132						; size = 96
_portal$ = -36						; size = 4
_rgb$ = -32						; size = 4
_col$ = -28						; size = 16
_k$ = -12						; size = 4
_j$ = -8						; size = 4
_i$ = -4						; size = 4
?DrawPortals@@YAXXZ PROC NEAR				; DrawPortals, COMDAT

; 576  : {

	push	ebp
	mov	ebp, esp
	sub	esp, 520				; 00000208H
	push	ebx
	push	esi
	push	edi

; 577  : 	long i, j, k, col[4], rgb;
; 578  : 	EDIT_PORTAL *portal;
; 579  : 	VEC v[8], vpos[8], pos[4];
; 580  : 	MAT mat;
; 581  : 	VEC vec;
; 582  : 	char buf[128];
; 583  : 
; 584  : // set render states
; 585  : 
; 586  : 	ALPHA_SRC(D3DBLEND_SRCALPHA);

	movsx	eax, WORD PTR ?RenderAlphaSrc@@3FA	; RenderAlphaSrc
	cmp	eax, 5
	je	SHORT $L81426
	mov	WORD PTR ?RenderAlphaSrc@@3FA, 5	; RenderAlphaSrc
	movsx	eax, WORD PTR ?RenderAlphaSrc@@3FA	; RenderAlphaSrc
	push	eax
	push	19					; 00000013H
	mov	ecx, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	mov	edx, DWORD PTR [ecx]
	mov	eax, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	push	eax
	call	DWORD PTR [edx+88]
	mov	eax, DWORD PTR ?RenderStateChange@@3JA	; RenderStateChange
	add	eax, 1
	mov	DWORD PTR ?RenderStateChange@@3JA, eax	; RenderStateChange
$L81426:

; 587  : 	ALPHA_DEST(D3DBLEND_INVSRCALPHA);

	movsx	eax, WORD PTR ?RenderAlphaDest@@3FA	; RenderAlphaDest
	cmp	eax, 6
	je	SHORT $L81427
	mov	WORD PTR ?RenderAlphaDest@@3FA, 6	; RenderAlphaDest
	movsx	eax, WORD PTR ?RenderAlphaDest@@3FA	; RenderAlphaDest
	push	eax
	push	20					; 00000014H
	mov	ecx, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	mov	edx, DWORD PTR [ecx]
	mov	eax, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	push	eax
	call	DWORD PTR [edx+88]
	mov	eax, DWORD PTR ?RenderStateChange@@3JA	; RenderStateChange
	add	eax, 1
	mov	DWORD PTR ?RenderStateChange@@3JA, eax	; RenderStateChange
$L81427:

; 588  : 	WIREFRAME_OFF();

	push	3
	push	8
	mov	eax, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	mov	ecx, DWORD PTR [eax]
	mov	edx, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	push	edx
	call	DWORD PTR [ecx+88]
	mov	eax, DWORD PTR ?RenderStateChange@@3JA	; RenderStateChange
	add	eax, 1
	mov	DWORD PTR ?RenderStateChange@@3JA, eax	; RenderStateChange

; 589  : 
; 590  : // loop thru all portals
; 591  : 
; 592  : 	portal = EditPortal;

	mov	eax, DWORD PTR _EditPortal
	mov	DWORD PTR _portal$[ebp], eax

; 593  : 	for (i = 0 ; i < EditPortalNum ; i++, portal++)

	mov	DWORD PTR _i$[ebp], 0
	jmp	SHORT $L81428
$L81429:
	mov	eax, DWORD PTR _i$[ebp]
	add	eax, 1
	mov	DWORD PTR _i$[ebp], eax
	mov	ecx, DWORD PTR _portal$[ebp]
	add	ecx, 88					; 00000058H
	mov	DWORD PTR _portal$[ebp], ecx
$L81428:
	mov	eax, DWORD PTR _i$[ebp]
	cmp	eax, DWORD PTR _EditPortalNum
	jge	$L81430

; 594  : 	{
; 595  : 
; 596  : // region?
; 597  : 
; 598  : 		if (portal->Region)

	mov	eax, DWORD PTR _portal$[ebp]
	cmp	DWORD PTR [eax], 0
	je	$L81431

; 599  : 		{
; 600  : 			if (CurrentPortal && CurrentPortal->Region && ((CurrentPortal->ID1 == portal->ID1 && BigBrother) || CurrentPortal == portal))

	cmp	DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A, 0 ; CurrentPortal
	je	$L81432
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	cmp	DWORD PTR [eax], 0
	je	$L81432
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	mov	ecx, DWORD PTR _portal$[ebp]
	mov	edx, DWORD PTR [eax+4]
	cmp	edx, DWORD PTR [ecx+4]
	jne	SHORT $L81434
	cmp	DWORD PTR _BigBrother, 0
	jne	SHORT $L81433
$L81434:
	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	cmp	eax, DWORD PTR _portal$[ebp]
	jne	$L81432
$L81433:

; 601  : 			{
; 602  : 
; 603  : // get 8 corners
; 604  : 
; 605  : 				SetVector(&v[0], -portal->Size[X], -portal->Size[Y], -portal->Size[Z]);

	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR [eax+60]
	fchs
	fstp	DWORD PTR _v$[ebp]
	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR [eax+64]
	fchs
	fstp	DWORD PTR _v$[ebp+4]
	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR [eax+68]
	fchs
	fstp	DWORD PTR _v$[ebp+8]

; 606  : 				SetVector(&v[1], portal->Size[X], -portal->Size[Y], -portal->Size[Z]);

	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+60]
	mov	DWORD PTR _v$[ebp+12], ecx
	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR [eax+64]
	fchs
	fstp	DWORD PTR _v$[ebp+16]
	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR [eax+68]
	fchs
	fstp	DWORD PTR _v$[ebp+20]

; 607  : 				SetVector(&v[2], -portal->Size[X], -portal->Size[Y], portal->Size[Z]);

	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR [eax+60]
	fchs
	fstp	DWORD PTR _v$[ebp+24]
	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR [eax+64]
	fchs
	fstp	DWORD PTR _v$[ebp+28]
	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+68]
	mov	DWORD PTR _v$[ebp+32], ecx

; 608  : 				SetVector(&v[3], portal->Size[X], -portal->Size[Y], portal->Size[Z]);

	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+60]
	mov	DWORD PTR _v$[ebp+36], ecx
	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR [eax+64]
	fchs
	fstp	DWORD PTR _v$[ebp+40]
	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+68]
	mov	DWORD PTR _v$[ebp+44], ecx

; 609  : 
; 610  : 				SetVector(&v[4], -portal->Size[X], portal->Size[Y], -portal->Size[Z]);

	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR [eax+60]
	fchs
	fstp	DWORD PTR _v$[ebp+48]
	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+64]
	mov	DWORD PTR _v$[ebp+52], ecx
	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR [eax+68]
	fchs
	fstp	DWORD PTR _v$[ebp+56]

; 611  : 				SetVector(&v[5], portal->Size[X], portal->Size[Y], -portal->Size[Z]);

	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+60]
	mov	DWORD PTR _v$[ebp+60], ecx
	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+64]
	mov	DWORD PTR _v$[ebp+64], ecx
	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR [eax+68]
	fchs
	fstp	DWORD PTR _v$[ebp+68]

; 612  : 				SetVector(&v[6], -portal->Size[X], portal->Size[Y], portal->Size[Z]);

	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR [eax+60]
	fchs
	fstp	DWORD PTR _v$[ebp+72]
	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+64]
	mov	DWORD PTR _v$[ebp+76], ecx
	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+68]
	mov	DWORD PTR _v$[ebp+80], ecx

; 613  : 				SetVector(&v[7], portal->Size[X], portal->Size[Y], portal->Size[Z]);

	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+60]
	mov	DWORD PTR _v$[ebp+84], ecx
	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+64]
	mov	DWORD PTR _v$[ebp+88], ecx
	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+68]
	mov	DWORD PTR _v$[ebp+92], ecx

; 614  : 
; 615  : 				for (j = 0 ; j < 8 ; j++)

	mov	DWORD PTR _j$[ebp], 0
	jmp	SHORT $L81435
$L81436:
	mov	eax, DWORD PTR _j$[ebp]
	add	eax, 1
	mov	DWORD PTR _j$[ebp], eax
$L81435:
	cmp	DWORD PTR _j$[ebp], 8
	jge	SHORT $L81437

; 616  : 				{
; 617  : 					RotTransVector(&portal->Matrix, &portal->Pos, &v[j], &vpos[j]);

	mov	eax, DWORD PTR _j$[ebp]
	imul	eax, 12					; 0000000cH
	lea	ecx, DWORD PTR _vpos$[ebp+eax]
	push	ecx
	mov	edx, DWORD PTR _j$[ebp]
	imul	edx, 12					; 0000000cH
	lea	eax, DWORD PTR _v$[ebp+edx]
	push	eax
	mov	ecx, DWORD PTR _portal$[ebp]
	add	ecx, 12					; 0000000cH
	push	ecx
	mov	edx, DWORD PTR _portal$[ebp]
	add	edx, 24					; 00000018H
	push	edx
	call	?RotTransVector@@YAXPATMatrixUnion@@PAUVectorStruct@@11@Z ; RotTransVector
	add	esp, 16					; 00000010H

; 618  : 				}

	jmp	SHORT $L81436
$L81437:

; 619  : 
; 620  : // draw
; 621  : 
; 622  : 				SET_TPAGE(-1);

	movsx	eax, WORD PTR ?RenderTP@@3FA		; RenderTP
	cmp	eax, -1
	je	SHORT $L81438
	mov	WORD PTR ?RenderTP@@3FA, -1		; RenderTP
	movsx	eax, WORD PTR ?RenderTP@@3FA		; RenderTP
	cmp	eax, -1
	jne	SHORT $L81439
	push	0
	push	0
	mov	eax, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	mov	ecx, DWORD PTR [eax]
	mov	edx, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	push	edx
	call	DWORD PTR [ecx+152]
	mov	eax, DWORD PTR ?TextureStateChange@@3JA	; TextureStateChange
	add	eax, 1
	mov	DWORD PTR ?TextureStateChange@@3JA, eax	; TextureStateChange
	jmp	SHORT $L81438
$L81439:
	movsx	eax, WORD PTR ?RenderTP@@3FA		; RenderTP
	shl	eax, 6
	mov	ecx, DWORD PTR ?TexInfo@@3PAUTEXINFO@@A	; TexInfo
	mov	edx, DWORD PTR [ecx+eax+52]
	push	edx
	push	0
	mov	eax, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	mov	ecx, DWORD PTR [eax]
	mov	edx, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	push	edx
	call	DWORD PTR [ecx+152]
	mov	eax, DWORD PTR ?TextureStateChange@@3JA	; TextureStateChange
	add	eax, 1
	mov	DWORD PTR ?TextureStateChange@@3JA, eax	; TextureStateChange
$L81438:

; 623  : 				ALPHA_ON();

	movsx	eax, WORD PTR ?RenderAlpha@@3FA		; RenderAlpha
	test	eax, eax
	jne	SHORT $L81441
	mov	WORD PTR ?RenderAlpha@@3FA, 1		; RenderAlpha
	movsx	eax, WORD PTR ?RenderAlpha@@3FA		; RenderAlpha
	push	eax
	push	27					; 0000001bH
	mov	ecx, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	mov	edx, DWORD PTR [ecx]
	mov	eax, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	push	eax
	call	DWORD PTR [edx+88]
	mov	eax, DWORD PTR ?RenderStateChange@@3JA	; RenderStateChange
	add	eax, 1
	mov	DWORD PTR ?RenderStateChange@@3JA, eax	; RenderStateChange
$L81441:

; 624  : 				ZBUFFER_ON();

	movsx	eax, WORD PTR ?RenderZbuffer@@3FA	; RenderZbuffer
	cmp	eax, 1
	je	SHORT $L81442
	mov	WORD PTR ?RenderZbuffer@@3FA, 1		; RenderZbuffer
	movsx	eax, WORD PTR ?RenderZbuffer@@3FA	; RenderZbuffer
	push	eax
	push	7
	mov	ecx, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	mov	edx, DWORD PTR [ecx]
	mov	eax, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	push	eax
	call	DWORD PTR [edx+88]
	mov	eax, DWORD PTR ?RenderStateChange@@3JA	; RenderStateChange
	add	eax, 1
	mov	DWORD PTR ?RenderStateChange@@3JA, eax	; RenderStateChange
$L81442:

; 625  : 
; 626  : 				for (j = 0 ; j < 6 ; j++)

	mov	DWORD PTR _j$[ebp], 0
	jmp	SHORT $L81443
$L81444:
	mov	eax, DWORD PTR _j$[ebp]
	add	eax, 1
	mov	DWORD PTR _j$[ebp], eax
$L81443:
	cmp	DWORD PTR _j$[ebp], 6
	jge	$L81432

; 627  : 				{
; 628  : 					for (k = 0 ; k < 4 ; k++)

	mov	DWORD PTR _k$[ebp], 0
	jmp	SHORT $L81446
$L81447:
	mov	eax, DWORD PTR _k$[ebp]
	add	eax, 1
	mov	DWORD PTR _k$[ebp], eax
$L81446:
	cmp	DWORD PTR _k$[ebp], 4
	jge	$L81448

; 629  : 					{
; 630  : 						pos[k] = vpos[DrawPortalIndex[j * 4 + k]];

	mov	eax, DWORD PTR _j$[ebp]
	mov	ecx, DWORD PTR _k$[ebp]
	lea	edx, DWORD PTR [ecx+eax*4]
	movzx	eax, WORD PTR _DrawPortalIndex[edx*2]
	imul	eax, 12					; 0000000cH
	lea	ecx, DWORD PTR _vpos$[ebp+eax]
	mov	edx, DWORD PTR _k$[ebp]
	imul	edx, 12					; 0000000cH
	lea	eax, DWORD PTR _pos$[ebp+edx]
	mov	edx, DWORD PTR [ecx]
	mov	DWORD PTR [eax], edx
	mov	edx, DWORD PTR [ecx+4]
	mov	DWORD PTR [eax+4], edx
	mov	ecx, DWORD PTR [ecx+8]
	mov	DWORD PTR [eax+8], ecx

; 631  : 	
; 632  : 						if (CurrentPortal == portal && j == EditPortalSide)

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	cmp	eax, DWORD PTR _portal$[ebp]
	jne	SHORT $L81449
	mov	eax, DWORD PTR _j$[ebp]
	cmp	eax, DWORD PTR _EditPortalSide
	jne	SHORT $L81449

; 633  : 							col[k] = 0x80ffffff * (FrameCount & 1);

	mov	eax, DWORD PTR ?FrameCount@@3KA		; FrameCount
	and	eax, 1
	imul	eax, -2130706433			; 80ffffffH
	mov	ecx, DWORD PTR _k$[ebp]
	mov	DWORD PTR _col$[ebp+ecx*4], eax

; 634  : 						else

	jmp	SHORT $L81450
$L81449:

; 635  : 							col[k] = DrawPortalCol[portal->ID1 % 6];

	mov	eax, DWORD PTR _portal$[ebp]
	mov	eax, DWORD PTR [eax+4]
	cdq
	mov	ecx, 6
	idiv	ecx
	mov	eax, DWORD PTR _k$[ebp]
	mov	ecx, DWORD PTR _DrawPortalCol[edx*4]
	mov	DWORD PTR _col$[ebp+eax*4], ecx
$L81450:

; 636  : 					}

	jmp	$L81447
$L81448:

; 637  : 
; 638  : 					DrawNearClipPolyTEX0(pos, col, 4);

	push	4
	lea	eax, DWORD PTR _col$[ebp]
	push	eax
	lea	ecx, DWORD PTR _pos$[ebp]
	push	ecx
	call	?DrawNearClipPolyTEX0@@YAXPAUVectorStruct@@PAJJ@Z ; DrawNearClipPolyTEX0
	add	esp, 12					; 0000000cH

; 639  : 				}

	jmp	$L81444
$L81432:

; 640  : 			}
; 641  : 
; 642  : // display region ID
; 643  : 
; 644  : 			wsprintf(buf, "%d", portal->ID1);

	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	push	ecx
	push	OFFSET FLAT:??_C@_02DPKJAMEF@?$CFd?$AA@
	lea	edx, DWORD PTR _buf$[ebp]
	push	edx
	call	DWORD PTR __imp__wsprintfA
	add	esp, 12					; 0000000cH

; 645  : 			RotTransVector(&ViewMatrix, &ViewTrans, &portal->Pos, &vec);

	lea	eax, DWORD PTR _vec$[ebp]
	push	eax
	mov	ecx, DWORD PTR _portal$[ebp]
	add	ecx, 12					; 0000000cH
	push	ecx
	push	OFFSET FLAT:?ViewTrans@@3UVectorStruct@@A ; ViewTrans
	push	OFFSET FLAT:?ViewMatrix@@3TMatrixUnion@@A ; ViewMatrix
	call	?RotTransVector@@YAXPATMatrixUnion@@PAUVectorStruct@@11@Z ; RotTransVector
	add	esp, 16					; 00000010H

; 646  : 			vec.v[X] -= 64 * ((portal->ID1 >= 10) + 1);

	mov	eax, DWORD PTR _portal$[ebp]
	xor	ecx, ecx
	cmp	DWORD PTR [eax+4], 10			; 0000000aH
	setge	cl
	add	ecx, 1
	shl	ecx, 6
	mov	DWORD PTR tv782[ebp], ecx
	fild	DWORD PTR tv782[ebp]
	fsubr	DWORD PTR _vec$[ebp]
	fstp	DWORD PTR _vec$[ebp]

; 647  : 			vec.v[Y] -= 128;

	fld	DWORD PTR _vec$[ebp+4]
	fsub	DWORD PTR __real@43000000
	fstp	DWORD PTR _vec$[ebp+4]

; 648  : 			if (vec.v[Z] > RenderSettings.NearClip)

	fld	DWORD PTR _vec$[ebp+8]
	fcomp	DWORD PTR ?RenderSettings@@3URENDER_SETTINGS@@A+28
	fnstsw	ax
	test	ah, 65					; 00000041H
	jne	$L81452

; 649  : 			{
; 650  : 				ALPHA_OFF();

	movsx	eax, WORD PTR ?RenderAlpha@@3FA		; RenderAlpha
	test	eax, eax
	je	SHORT $L81453
	mov	WORD PTR ?RenderAlpha@@3FA, 0		; RenderAlpha
	movsx	eax, WORD PTR ?RenderAlpha@@3FA		; RenderAlpha
	push	eax
	push	27					; 0000001bH
	mov	ecx, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	mov	edx, DWORD PTR [ecx]
	mov	eax, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	push	eax
	call	DWORD PTR [edx+88]
	mov	eax, DWORD PTR ?RenderStateChange@@3JA	; RenderStateChange
	add	eax, 1
	mov	DWORD PTR ?RenderStateChange@@3JA, eax	; RenderStateChange
$L81453:

; 651  : 				ZBUFFER_OFF();

	movsx	eax, WORD PTR ?RenderZbuffer@@3FA	; RenderZbuffer
	test	eax, eax
	je	SHORT $L81454
	mov	WORD PTR ?RenderZbuffer@@3FA, 0		; RenderZbuffer
	movsx	eax, WORD PTR ?RenderZbuffer@@3FA	; RenderZbuffer
	push	eax
	push	7
	mov	ecx, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	mov	edx, DWORD PTR [ecx]
	mov	eax, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	push	eax
	call	DWORD PTR [edx+88]
	mov	eax, DWORD PTR ?RenderStateChange@@3JA	; RenderStateChange
	add	eax, 1
	mov	DWORD PTR ?RenderStateChange@@3JA, eax	; RenderStateChange
$L81454:

; 652  : 				DumpText3D(&vec, 128, 256, 0x00ffff, buf);

	lea	eax, DWORD PTR _buf$[ebp]
	push	eax
	push	65535					; 0000ffffH
	push	1132462080				; 43800000H
	push	1124073472				; 43000000H
	lea	ecx, DWORD PTR _vec$[ebp]
	push	ecx
	call	?DumpText3D@@YAXPAUVectorStruct@@MMJPAD@Z ; DumpText3D
	add	esp, 20					; 00000014H
$L81452:

; 653  : 			}
; 654  : 		}
; 655  : 
; 656  : // portal
; 657  : 
; 658  : 		else

	jmp	$L81455
$L81431:

; 659  : 		{
; 660  : 
; 661  : // get rgb
; 662  : 
; 663  : 			SubVector(&portal->Pos, &ViewCameraPos, &vec);

	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR [eax+12]
	fsub	DWORD PTR ?ViewCameraPos@@3UVectorStruct@@A
	fstp	DWORD PTR _vec$[ebp]
	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR [eax+16]
	fsub	DWORD PTR ?ViewCameraPos@@3UVectorStruct@@A+4
	fstp	DWORD PTR _vec$[ebp+4]
	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR [eax+20]
	fsub	DWORD PTR ?ViewCameraPos@@3UVectorStruct@@A+8
	fstp	DWORD PTR _vec$[ebp+8]

; 664  : 			if (DotProduct(&vec, &portal->Matrix.mv[L]) < 0.0f)

	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR _vec$[ebp]
	fmul	DWORD PTR [eax+48]
	mov	ecx, DWORD PTR _portal$[ebp]
	fld	DWORD PTR _vec$[ebp+4]
	fmul	DWORD PTR [ecx+52]
	faddp	ST(1), ST(0)
	mov	edx, DWORD PTR _portal$[ebp]
	fld	DWORD PTR _vec$[ebp+8]
	fmul	DWORD PTR [edx+56]
	faddp	ST(1), ST(0)
	fcomp	DWORD PTR __real@00000000
	fnstsw	ax
	test	ah, 5
	jp	SHORT $L81456

; 665  : 				rgb = 0x80ff0000;

	mov	DWORD PTR _rgb$[ebp], -2130771968	; 80ff0000H

; 666  : 			else

	jmp	SHORT $L81457
$L81456:

; 667  : 				rgb = 0x8000ff00;

	mov	DWORD PTR _rgb$[ebp], -2147418368	; 8000ff00H
$L81457:

; 668  : 		
; 669  : // get 4 corners
; 670  : 
; 671  : 			SetVector(&v[0], -portal->Size[X], -portal->Size[Y], 0);

	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR [eax+60]
	fchs
	fstp	DWORD PTR _v$[ebp]
	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR [eax+64]
	fchs
	fstp	DWORD PTR _v$[ebp+4]
	mov	DWORD PTR _v$[ebp+8], 0

; 672  : 			SetVector(&v[1], portal->Size[X], -portal->Size[Y], 0);

	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+60]
	mov	DWORD PTR _v$[ebp+12], ecx
	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR [eax+64]
	fchs
	fstp	DWORD PTR _v$[ebp+16]
	mov	DWORD PTR _v$[ebp+20], 0

; 673  : 			SetVector(&v[2], portal->Size[X], portal->Size[Y], 0);

	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+60]
	mov	DWORD PTR _v$[ebp+24], ecx
	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+64]
	mov	DWORD PTR _v$[ebp+28], ecx
	mov	DWORD PTR _v$[ebp+32], 0

; 674  : 			SetVector(&v[3], -portal->Size[X], portal->Size[Y], 0);

	mov	eax, DWORD PTR _portal$[ebp]
	fld	DWORD PTR [eax+60]
	fchs
	fstp	DWORD PTR _v$[ebp+36]
	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+64]
	mov	DWORD PTR _v$[ebp+40], ecx
	mov	DWORD PTR _v$[ebp+44], 0

; 675  : 
; 676  : 			for (j = 0 ; j < 4 ; j++)

	mov	DWORD PTR _j$[ebp], 0
	jmp	SHORT $L81458
$L81459:
	mov	eax, DWORD PTR _j$[ebp]
	add	eax, 1
	mov	DWORD PTR _j$[ebp], eax
$L81458:
	cmp	DWORD PTR _j$[ebp], 4
	jge	SHORT $L81460

; 677  : 			{
; 678  : 				RotTransVector(&portal->Matrix, &portal->Pos, &v[j], &pos[j]);

	mov	eax, DWORD PTR _j$[ebp]
	imul	eax, 12					; 0000000cH
	lea	ecx, DWORD PTR _pos$[ebp+eax]
	push	ecx
	mov	edx, DWORD PTR _j$[ebp]
	imul	edx, 12					; 0000000cH
	lea	eax, DWORD PTR _v$[ebp+edx]
	push	eax
	mov	ecx, DWORD PTR _portal$[ebp]
	add	ecx, 12					; 0000000cH
	push	ecx
	mov	edx, DWORD PTR _portal$[ebp]
	add	edx, 24					; 00000018H
	push	edx
	call	?RotTransVector@@YAXPATMatrixUnion@@PAUVectorStruct@@11@Z ; RotTransVector
	add	esp, 16					; 00000010H

; 679  : 				col[j] = rgb;

	mov	eax, DWORD PTR _j$[ebp]
	mov	ecx, DWORD PTR _rgb$[ebp]
	mov	DWORD PTR _col$[ebp+eax*4], ecx

; 680  : 			}

	jmp	SHORT $L81459
$L81460:

; 681  : 
; 682  : // draw
; 683  : 
; 684  : 			SET_TPAGE(-1);

	movsx	eax, WORD PTR ?RenderTP@@3FA		; RenderTP
	cmp	eax, -1
	je	SHORT $L81461
	mov	WORD PTR ?RenderTP@@3FA, -1		; RenderTP
	movsx	eax, WORD PTR ?RenderTP@@3FA		; RenderTP
	cmp	eax, -1
	jne	SHORT $L81462
	push	0
	push	0
	mov	eax, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	mov	ecx, DWORD PTR [eax]
	mov	edx, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	push	edx
	call	DWORD PTR [ecx+152]
	mov	eax, DWORD PTR ?TextureStateChange@@3JA	; TextureStateChange
	add	eax, 1
	mov	DWORD PTR ?TextureStateChange@@3JA, eax	; TextureStateChange
	jmp	SHORT $L81461
$L81462:
	movsx	eax, WORD PTR ?RenderTP@@3FA		; RenderTP
	shl	eax, 6
	mov	ecx, DWORD PTR ?TexInfo@@3PAUTEXINFO@@A	; TexInfo
	mov	edx, DWORD PTR [ecx+eax+52]
	push	edx
	push	0
	mov	eax, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	mov	ecx, DWORD PTR [eax]
	mov	edx, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	push	edx
	call	DWORD PTR [ecx+152]
	mov	eax, DWORD PTR ?TextureStateChange@@3JA	; TextureStateChange
	add	eax, 1
	mov	DWORD PTR ?TextureStateChange@@3JA, eax	; TextureStateChange
$L81461:

; 685  : 			ALPHA_ON();

	movsx	eax, WORD PTR ?RenderAlpha@@3FA		; RenderAlpha
	test	eax, eax
	jne	SHORT $L81464
	mov	WORD PTR ?RenderAlpha@@3FA, 1		; RenderAlpha
	movsx	eax, WORD PTR ?RenderAlpha@@3FA		; RenderAlpha
	push	eax
	push	27					; 0000001bH
	mov	ecx, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	mov	edx, DWORD PTR [ecx]
	mov	eax, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	push	eax
	call	DWORD PTR [edx+88]
	mov	eax, DWORD PTR ?RenderStateChange@@3JA	; RenderStateChange
	add	eax, 1
	mov	DWORD PTR ?RenderStateChange@@3JA, eax	; RenderStateChange
$L81464:

; 686  : 			ZBUFFER_ON();

	movsx	eax, WORD PTR ?RenderZbuffer@@3FA	; RenderZbuffer
	cmp	eax, 1
	je	SHORT $L81465
	mov	WORD PTR ?RenderZbuffer@@3FA, 1		; RenderZbuffer
	movsx	eax, WORD PTR ?RenderZbuffer@@3FA	; RenderZbuffer
	push	eax
	push	7
	mov	ecx, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	mov	edx, DWORD PTR [ecx]
	mov	eax, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	push	eax
	call	DWORD PTR [edx+88]
	mov	eax, DWORD PTR ?RenderStateChange@@3JA	; RenderStateChange
	add	eax, 1
	mov	DWORD PTR ?RenderStateChange@@3JA, eax	; RenderStateChange
$L81465:

; 687  : 
; 688  : 			DrawNearClipPolyTEX0(pos, col, 4);

	push	4
	lea	eax, DWORD PTR _col$[ebp]
	push	eax
	lea	ecx, DWORD PTR _pos$[ebp]
	push	ecx
	call	?DrawNearClipPolyTEX0@@YAXPAUVectorStruct@@PAJJ@Z ; DrawNearClipPolyTEX0
	add	esp, 12					; 0000000cH
$L81455:

; 689  : 		}
; 690  : 
; 691  : // draw axis?
; 692  : 
; 693  : 		if (CurrentPortal == portal)

	mov	eax, DWORD PTR ?CurrentPortal@@3PAUEDIT_PORTAL@@A ; CurrentPortal
	cmp	eax, DWORD PTR _portal$[ebp]
	jne	$L81466

; 694  : 		{
; 695  : 			ALPHA_OFF();

	movsx	eax, WORD PTR ?RenderAlpha@@3FA		; RenderAlpha
	test	eax, eax
	je	SHORT $L81467
	mov	WORD PTR ?RenderAlpha@@3FA, 0		; RenderAlpha
	movsx	eax, WORD PTR ?RenderAlpha@@3FA		; RenderAlpha
	push	eax
	push	27					; 0000001bH
	mov	ecx, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	mov	edx, DWORD PTR [ecx]
	mov	eax, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	push	eax
	call	DWORD PTR [edx+88]
	mov	eax, DWORD PTR ?RenderStateChange@@3JA	; RenderStateChange
	add	eax, 1
	mov	DWORD PTR ?RenderStateChange@@3JA, eax	; RenderStateChange
$L81467:

; 696  : 			ZBUFFER_OFF();

	movsx	eax, WORD PTR ?RenderZbuffer@@3FA	; RenderZbuffer
	test	eax, eax
	je	SHORT $L81468
	mov	WORD PTR ?RenderZbuffer@@3FA, 0		; RenderZbuffer
	movsx	eax, WORD PTR ?RenderZbuffer@@3FA	; RenderZbuffer
	push	eax
	push	7
	mov	ecx, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	mov	edx, DWORD PTR [ecx]
	mov	eax, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	push	eax
	call	DWORD PTR [edx+88]
	mov	eax, DWORD PTR ?RenderStateChange@@3JA	; RenderStateChange
	add	eax, 1
	mov	DWORD PTR ?RenderStateChange@@3JA, eax	; RenderStateChange
$L81468:

; 697  : 
; 698  : 			if (EditPortalAxisType)

	cmp	DWORD PTR _EditPortalAxisType, 0
	je	SHORT $L81469

; 699  : 				CopyMatrix(&IdentityMatrix, &mat);

	lea	eax, DWORD PTR _mat$[ebp]
	push	eax
	push	OFFSET FLAT:?IdentityMatrix@@3TMatrixUnion@@A ; IdentityMatrix
	call	?CopyMatrix@@YAXPATMatrixUnion@@0@Z	; CopyMatrix
	add	esp, 8

; 700  : 			else

	jmp	SHORT $L81470
$L81469:

; 701  : 				CopyMatrix(&CAM_MainCamera->WMatrix, &mat);

	lea	eax, DWORD PTR _mat$[ebp]
	push	eax
	mov	ecx, DWORD PTR ?CAM_MainCamera@@3PAUCameraStruct@@A ; CAM_MainCamera
	add	ecx, 16					; 00000010H
	push	ecx
	call	?CopyMatrix@@YAXPATMatrixUnion@@0@Z	; CopyMatrix
	add	esp, 8
$L81470:

; 702  : 
; 703  : 			MatMulScalar(&mat, 2.0f);

	push	1073741824				; 40000000H
	lea	eax, DWORD PTR _mat$[ebp]
	push	eax
	call	?MatMulScalar@@YAXPATMatrixUnion@@M@Z	; MatMulScalar
	add	esp, 8

; 704  : 			DrawAxis(&mat, &portal->Pos);

	mov	eax, DWORD PTR _portal$[ebp]
	add	eax, 12					; 0000000cH
	push	eax
	lea	ecx, DWORD PTR _mat$[ebp]
	push	ecx
	call	?DrawAxis@@YAXPATMatrixUnion@@PAUVectorStruct@@@Z ; DrawAxis
	add	esp, 8
$L81466:

; 705  : 		}
; 706  : 	}

	jmp	$L81429
$L81430:

; 707  : 
; 708  : // reset render states
; 709  : 
; 710  : 	WIREFRAME_ON();

	mov	eax, DWORD PTR ?DxState@@3UDX_STATE@@A+4
	push	eax
	push	8
	mov	ecx, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	mov	edx, DWORD PTR [ecx]
	mov	eax, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	push	eax
	call	DWORD PTR [edx+88]
	mov	eax, DWORD PTR ?RenderStateChange@@3JA	; RenderStateChange
	add	eax, 1
	mov	DWORD PTR ?RenderStateChange@@3JA, eax	; RenderStateChange

; 711  : 	ALPHA_OFF();

	movsx	eax, WORD PTR ?RenderAlpha@@3FA		; RenderAlpha
	test	eax, eax
	je	SHORT $L81471
	mov	WORD PTR ?RenderAlpha@@3FA, 0		; RenderAlpha
	movsx	eax, WORD PTR ?RenderAlpha@@3FA		; RenderAlpha
	push	eax
	push	27					; 0000001bH
	mov	ecx, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	mov	edx, DWORD PTR [ecx]
	mov	eax, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	push	eax
	call	DWORD PTR [edx+88]
	mov	eax, DWORD PTR ?RenderStateChange@@3JA	; RenderStateChange
	add	eax, 1
	mov	DWORD PTR ?RenderStateChange@@3JA, eax	; RenderStateChange
$L81471:

; 712  : 	ZBUFFER_ON();

	movsx	eax, WORD PTR ?RenderZbuffer@@3FA	; RenderZbuffer
	cmp	eax, 1
	je	SHORT $L81413
	mov	WORD PTR ?RenderZbuffer@@3FA, 1		; RenderZbuffer
	movsx	eax, WORD PTR ?RenderZbuffer@@3FA	; RenderZbuffer
	push	eax
	push	7
	mov	ecx, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	mov	edx, DWORD PTR [ecx]
	mov	eax, DWORD PTR ?D3Ddevice@@3PAUIDirect3DDevice3@@A ; D3Ddevice
	push	eax
	call	DWORD PTR [edx+88]
	mov	eax, DWORD PTR ?RenderStateChange@@3JA	; RenderStateChange
	add	eax, 1
	mov	DWORD PTR ?RenderStateChange@@3JA, eax	; RenderStateChange
$L81413:

; 713  : }

	pop	edi
	pop	esi
	pop	ebx
	mov	esp, ebp
	pop	ebp
	ret	0
?DrawPortals@@YAXXZ ENDP				; DrawPortals
_TEXT	ENDS
PUBLIC	??_C@_06FLCJJPBG@Region?$AA@			; `string'
PUBLIC	??_C@_06FPPGHFGB@Portal?$AA@			; `string'
PUBLIC	??_C@_05FEDMHOOH@ID?5?$CFd?$AA@			; `string'
PUBLIC	??_C@_06CEKNEMPB@ID1?5?$CFd?$AA@		; `string'
PUBLIC	??_C@_06GDANDGCB@ID2?5?$CFd?$AA@		; `string'
PUBLIC	??_C@_0N@MOINFLNL@Axis?5?$CFs?5?9?5?$CFs?$AA@	; `string'
PUBLIC	??_C@_03JJNBAPG@Yep?$AA@			; `string'
PUBLIC	??_C@_04PBCAPOCN@Nope?$AA@			; `string'
PUBLIC	??_C@_0BC@GJMGDHLD@Big?5Bellends?3?5?5?$CFs?$AA@ ; `string'
PUBLIC	?DisplayPortalInfo@@YAXPAUEDIT_PORTAL@@@Z	; DisplayPortalInfo
EXTRN	?DumpText@@YAXFFFFJPAD@Z:NEAR			; DumpText
;	COMDAT ??_C@_06FLCJJPBG@Region?$AA@
CONST	SEGMENT
??_C@_06FLCJJPBG@Region?$AA@ DB 'Region', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_06FPPGHFGB@Portal?$AA@
CONST	SEGMENT
??_C@_06FPPGHFGB@Portal?$AA@ DB 'Portal', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_05FEDMHOOH@ID?5?$CFd?$AA@
CONST	SEGMENT
??_C@_05FEDMHOOH@ID?5?$CFd?$AA@ DB 'ID %d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_06CEKNEMPB@ID1?5?$CFd?$AA@
CONST	SEGMENT
??_C@_06CEKNEMPB@ID1?5?$CFd?$AA@ DB 'ID1 %d', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_06GDANDGCB@ID2?5?$CFd?$AA@
CONST	SEGMENT
??_C@_06GDANDGCB@ID2?5?$CFd?$AA@ DB 'ID2 %d', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@MOINFLNL@Axis?5?$CFs?5?9?5?$CFs?$AA@
CONST	SEGMENT
??_C@_0N@MOINFLNL@Axis?5?$CFs?5?9?5?$CFs?$AA@ DB 'Axis %s - %s', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_03JJNBAPG@Yep?$AA@
CONST	SEGMENT
??_C@_03JJNBAPG@Yep?$AA@ DB 'Yep', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_04PBCAPOCN@Nope?$AA@
CONST	SEGMENT
??_C@_04PBCAPOCN@Nope?$AA@ DB 'Nope', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BC@GJMGDHLD@Big?5Bellends?3?5?5?$CFs?$AA@
CONST	SEGMENT
??_C@_0BC@GJMGDHLD@Big?5Bellends?3?5?5?$CFs?$AA@ DB 'Big Bellends:  %s', 00H ; `string'
; Function compile flags: /Odt /ZI
CONST	ENDS
;	COMDAT ?DisplayPortalInfo@@YAXPAUEDIT_PORTAL@@@Z
_TEXT	SEGMENT
tv151 = -196						; size = 4
tv65 = -196						; size = 4
_buf$ = -128						; size = 128
_portal$ = 8						; size = 4
?DisplayPortalInfo@@YAXPAUEDIT_PORTAL@@@Z PROC NEAR	; DisplayPortalInfo, COMDAT

; 720  : {

	push	ebp
	mov	ebp, esp
	sub	esp, 196				; 000000c4H
	push	ebx
	push	esi
	push	edi

; 721  : 	char buf[128];
; 722  : 
; 723  : // type
; 724  : 
; 725  : 	DumpText(450, 0, 8, 16, 0x00ffff, portal->Region ? "Region" : "Portal");

	mov	eax, DWORD PTR _portal$[ebp]
	cmp	DWORD PTR [eax], 0
	je	SHORT $L81667
	mov	DWORD PTR tv65[ebp], OFFSET FLAT:??_C@_06FLCJJPBG@Region?$AA@
	jmp	SHORT $L81668
$L81667:
	mov	DWORD PTR tv65[ebp], OFFSET FLAT:??_C@_06FPPGHFGB@Portal?$AA@
$L81668:
	mov	ecx, DWORD PTR tv65[ebp]
	push	ecx
	push	65535					; 0000ffffH
	push	16					; 00000010H
	push	8
	push	0
	push	450					; 000001c2H
	call	?DumpText@@YAXFFFFJPAD@Z		; DumpText
	add	esp, 24					; 00000018H

; 726  : 
; 727  : // ID's
; 728  : 
; 729  : 	if (portal->Region)

	mov	eax, DWORD PTR _portal$[ebp]
	cmp	DWORD PTR [eax], 0
	je	SHORT $L81479

; 730  : 	{
; 731  : 		wsprintf(buf, "ID %d", portal->ID1);

	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	push	ecx
	push	OFFSET FLAT:??_C@_05FEDMHOOH@ID?5?$CFd?$AA@
	lea	edx, DWORD PTR _buf$[ebp]
	push	edx
	call	DWORD PTR __imp__wsprintfA
	add	esp, 12					; 0000000cH

; 732  : 		DumpText(450, 24, 8, 16, 0xffff00, buf);

	lea	eax, DWORD PTR _buf$[ebp]
	push	eax
	push	16776960				; 00ffff00H
	push	16					; 00000010H
	push	8
	push	24					; 00000018H
	push	450					; 000001c2H
	call	?DumpText@@YAXFFFFJPAD@Z		; DumpText
	add	esp, 24					; 00000018H

; 733  : 	}
; 734  : 	else

	jmp	SHORT $L81481
$L81479:

; 735  : 	{
; 736  : 		wsprintf(buf, "ID1 %d", portal->ID1);

	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+4]
	push	ecx
	push	OFFSET FLAT:??_C@_06CEKNEMPB@ID1?5?$CFd?$AA@
	lea	edx, DWORD PTR _buf$[ebp]
	push	edx
	call	DWORD PTR __imp__wsprintfA
	add	esp, 12					; 0000000cH

; 737  : 		DumpText(450, 24, 8, 16, 0xff0000, buf);

	lea	eax, DWORD PTR _buf$[ebp]
	push	eax
	push	16711680				; 00ff0000H
	push	16					; 00000010H
	push	8
	push	24					; 00000018H
	push	450					; 000001c2H
	call	?DumpText@@YAXFFFFJPAD@Z		; DumpText
	add	esp, 24					; 00000018H

; 738  : 		wsprintf(buf, "ID2 %d", portal->ID2);

	mov	eax, DWORD PTR _portal$[ebp]
	mov	ecx, DWORD PTR [eax+8]
	push	ecx
	push	OFFSET FLAT:??_C@_06GDANDGCB@ID2?5?$CFd?$AA@
	lea	edx, DWORD PTR _buf$[ebp]
	push	edx
	call	DWORD PTR __imp__wsprintfA
	add	esp, 12					; 0000000cH

; 739  : 		DumpText(530, 24, 8, 16, 0x00ff00, buf);

	lea	eax, DWORD PTR _buf$[ebp]
	push	eax
	push	65280					; 0000ff00H
	push	16					; 00000010H
	push	8
	push	24					; 00000018H
	push	530					; 00000212H
	call	?DumpText@@YAXFFFFJPAD@Z		; DumpText
	add	esp, 24					; 00000018H
$L81481:

; 740  : 	}
; 741  : 
; 742  : // axis
; 743  : 
; 744  : 	wsprintf(buf, "Axis %s - %s", EditPortalAxisNames[EditPortalAxis], EditPortalAxisTypeNames[EditPortalAxisType]);

	mov	eax, DWORD PTR _EditPortalAxisType
	mov	ecx, DWORD PTR _EditPortalAxisTypeNames[eax*4]
	push	ecx
	mov	edx, DWORD PTR _EditPortalAxis
	mov	eax, DWORD PTR _EditPortalAxisNames[edx*4]
	push	eax
	push	OFFSET FLAT:??_C@_0N@MOINFLNL@Axis?5?$CFs?5?9?5?$CFs?$AA@
	lea	ecx, DWORD PTR _buf$[ebp]
	push	ecx
	call	DWORD PTR __imp__wsprintfA
	add	esp, 16					; 00000010H

; 745  : 	DumpText(450, 48, 8, 16, 0xff00ff, buf);

	lea	eax, DWORD PTR _buf$[ebp]
	push	eax
	push	16711935				; 00ff00ffH
	push	16					; 00000010H
	push	8
	push	48					; 00000030H
	push	450					; 000001c2H
	call	?DumpText@@YAXFFFFJPAD@Z		; DumpText
	add	esp, 24					; 00000018H

; 746  : 
; 747  : // big bastards
; 748  : 
; 749  : 	wsprintf(buf, "Big Bellends:  %s", BigBrother ? "Yep" : "Nope");

	cmp	DWORD PTR _BigBrother, 0
	je	SHORT $L81669
	mov	DWORD PTR tv151[ebp], OFFSET FLAT:??_C@_03JJNBAPG@Yep?$AA@
	jmp	SHORT $L81670
$L81669:
	mov	DWORD PTR tv151[ebp], OFFSET FLAT:??_C@_04PBCAPOCN@Nope?$AA@
$L81670:
	mov	eax, DWORD PTR tv151[ebp]
	push	eax
	push	OFFSET FLAT:??_C@_0BC@GJMGDHLD@Big?5Bellends?3?5?5?$CFs?$AA@
	lea	ecx, DWORD PTR _buf$[ebp]
	push	ecx
	call	DWORD PTR __imp__wsprintfA
	add	esp, 12					; 0000000cH

; 750  : 	DumpText(450, 72, 8, 16, 0x0000ff, buf);

	lea	eax, DWORD PTR _buf$[ebp]
	push	eax
	push	255					; 000000ffH
	push	16					; 00000010H
	push	8
	push	72					; 00000048H
	push	450					; 000001c2H
	call	?DumpText@@YAXFFFFJPAD@Z		; DumpText
	add	esp, 24					; 00000018H

; 751  : }

	pop	edi
	pop	esi
	pop	ebx
	mov	esp, ebp
	pop	ebp
	ret	0
?DisplayPortalInfo@@YAXPAUEDIT_PORTAL@@@Z ENDP		; DisplayPortalInfo
_TEXT	ENDS
END
